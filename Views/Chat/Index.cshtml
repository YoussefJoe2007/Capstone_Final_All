@{
    Layout = null;
}


@* 
       /********************8
        *
        # تثبيت المكتبات الأساسية
        #!pip install langchain
        #!pip install langchain_community
        #!pip install ollama
        #!pip install gradio

        # استدعاء المكتبات اللازمة
        import gradio as gr
        from langchain_community.llms import Ollama

        # Code Llama تهيئة نموذج
        codellama = Ollama(model="codellama:7b-instruct-q2_K")

        # دالة توليد الأكواد
        def generate_code(prompt):
            system_prompt = "[system] أنت مساعد برمجي متخصص في CSS. مهمتك هي توليد كود نظيف ومفهوم بناءً على وصف المستخدم."
            full_prompt = f"{system_prompt}\n[user] {prompt}"
            return codellama.invoke(full_prompt)

        # دالة تصحيح الأكواد
        def fix_css(css_code):
            system_prompt = "[system] أنت مساعد متخصص في تصحيح أكواد CSS. قم بإصلاح الأخطاء في الكود التالي."
            full_prompt = f"{system_prompt}\n[user] كود CSS به أخطاء:\n{css_code}"
            return codellama.invoke(full_prompt)

        # دالة تحسين الأكواد
        def improve_css(css_code):
            system_prompt = "[system] أنت مساعد خبير في تحسين أكواد CSS. قم بتحسين الكود ليصبح أكثر كفاءة."
            full_prompt = f"{system_prompt}\n[user] كود CSS يحتاج تحسينًا:\n{css_code}"
            return codellama.invoke(full_prompt)

        # دالة شرح الأكواد
        def explain_css(css_code):
            system_prompt = "[system] أنت مساعد متخصص في شرح أكواد CSS بطريقة مفهومة."
            full_prompt = f"{system_prompt}\n[user] أريد شرحًا لهذا الكود:\n{css_code}"
            return codellama.invoke(full_prompt)

        # إنشاء واجهة المستخدم
        with gr.Blocks() as demo:
            gr.Markdown("# 🖥️ مساعد الذكاء الاصطناعي لـ CSS🚀")

            with gr.Tab("📝 CSS توليد كود "):
                prompt_input = gr.Textbox(label="أدخل وصفًا لما تريد توليده", placeholder="مثال: زر أزرق بتأثير عند التحويم")
                generate_btn = gr.Button("🔹 توليد الكود")
                generated_code_output = gr.Code(label="الكود الناتج")
                generate_btn.click(generate_code, inputs=prompt_input, outputs=generated_code_output)

            with gr.Tab("✅ CSS تصحيح كود "):
                css_input = gr.Code(label="أدخل كود يحتوي على أخطاء", language="css")
                fix_btn = gr.Button("🔹 تصحيح الكود")
                fixed_css_output = gr.Code(label="الكود المصحح")
                fix_btn.click(fix_css, inputs=css_input, outputs=fixed_css_output)

            with gr.Tab("🚀 CSS تحسين كود"):
                css_input_improve = gr.Code(label="أدخل كود لتحسينه", language="css")
                improve_btn = gr.Button("🔹 تحسين الكود")
                improved_css_output = gr.Code(label="الكود المحسن")
                improve_btn.click(improve_css, inputs=css_input_improve, outputs=improved_css_output)

            with gr.Tab("📖  CSS شرح كود "):
                css_input_explain = gr.Code(label="أدخل كود لشرحه", language="css")
                explain_btn = gr.Button("🔹 شرح الكود")
                explained_output = gr.Textbox(label="الشرح الناتج")
                explain_btn.click(explain_css, inputs=css_input_explain, outputs=explained_output)

        # تشغيل التطبيق
        demo.launch()
        */





        //        التعرف على الأدوية الموجودة في الوصفات الطبية
        // يستخدم هذا المشروع التعرف على خط اليد للتعرف على أسماء الأدوية من وصفة الطبيب. ويتم ذلك باستخدام الشبكة العصبية التلافيفية Convolutional Neural Network (CNN) التي تم تطويرها باستخدام Tensorflow Framework وOpenCV.

        // ويمكن تقسيم المشروع إلى قسمين متميزين على النحو التالي: –

        // خط أنابيب التعرف على الكتابة اليدوية Handwriting Recognition Pipeline.
        // تطبيق نظام الوصفات الطبية للطبيب Doctor's Prescription System App.
        // نظام الوصفات الطبية للطبيب
        // يعد خط أنابيب التعرف على خط اليد المكون الأساسي لهذا المشروع. يأخذ خط الأنابيب بشكل أساسي صورة إدخال ويستخرج "الكلمات المكتوبة بخط اليد handwritten words" من هذه الصورة. يمكن استخدام هذه الكلمات لاحقًا للتحقق من وجود أي تطابقات في قاعدة بيانات الأدوية.

        // التقنيات المستخدمة
        // الاسم	الوصف
        // TensorFlow	TensorFlow هي مكتبة برمجيات مجانية ومفتوحة المصدر للتعلم الآلي.
        // Keras	Keras هي مكتبة برمجيات مفتوحة المصدر توفر واجهة بايثون للشبكات العصبية الاصطناعية artificial neural networks.
        // OpenCV	OpenCV هي مكتبة لدوال البرمجة تهدف بشكل أساسي إلى الرؤية الحاسوبية computer vision في الوقت الفعلي.
        // مجموعة البيانات
        // تم تدريب نموذج التعرف على الحروف المكتوبة بخط اليد على مجموعة بيانات EMNIST. تمت قراءة البيانات من ملف CSV وتحويلها إلى مصفوفات numpy دون أي معالجة مسبقة أو زيادة البيانات. خصائص مجموعة بيانات EMNIST هي كما يلي:-

        // عدد الفئات (Number of classes): 47.
        // جميع الفئات (All Classes):
        // 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabdefghnqrt

        // حجم الصورة (Image Size) 28x28x1 (صورة بتدرج رمادي مقاس 28 × 28 بكسل).
        // عدد صور التدريب Number of training images: 112800.
        // عدد صور الاختبار Number of testing images: 18800.
        // تدريب النموذج
        // تم تطوير نموذج التعرف على الحروف المكتوبة بخط اليد باستخدام Tensorflow وKeras. إنها شبكة CNN متعددة الطبقات (شبكة عصبية تلافيفية) حققت دقة تحقق بنسبة 86% بعد التدريب لمدة 20 حقبة (epochs). كان أداء النموذج إيجابيًا في مجموعة الاختبار ولم يفشل إلا في بعض الظروف الخارجية حيث تبدو بعض الأحرف مثل أحرف أخرى (على سبيل المثال: 4 تبدو مثل 9، وI يبدو مثل l، وما إلى ذلك). بنية النموذج هي كما يلي: –

        // 2 X Conv2D → Batch Normalization → ReLU → MaxPooling2D
        // Dropout
        // 1 X Conv2D → Batch Normalization → ReLU → MaxPooling2D
        // Dropout
        // 1 X Conv2D → Batch Normalization → ReLU → MaxPooling2D
        // Dropout
        // 1 X Cond2D → Batch Normalization → ReLU
        // Flatten
        // Dense
        // Dropout
        // Dense (Output Layer)

        // نشر النموذج
        // تم نشر نموذج التعرف على خط اليد على تطبيق Android باستخدام مكتبة TensorFlow Lite. لكي يتم التعرف على الكتابة اليدوية، يتم اتباع سلسلة من الخطوات للتأكد من معالجة الصورة بشكل صحيح ويتم تغذية البيانات ذات الصلة إلى نموذج التعرف على الأحرف المكتوبة بخط اليد. الخطوات المتبعة في المعالجة والتعرف على الأحرف المكتوبة بخط اليد على الصورة المدخلة هي كما يلي:-

        // الخطوة 1: التحميل وتغيير الحجم
        // يتم تحميل الصورة باستخدام دالة imread الخاصة بـ OpenCV ثم يتم تغيير حجمها باستخدام دالة resize لإنشاء صورة بأبعاد 300 × 300 بكسل.

        // وهنا كيف تبدو الصورة بعد التحميل وتغيير الحجم loading and resizing.


        // الخطوة 2: تحويل التدرج الرمادي
        // يتم تحويل الصورة إلى صورة ذات تدرج رمادي grayscale image باستخدام دالة cvtColor مع كود تحويل مساحة اللون COLOR_RGB2GRAY.يتم تحويل الصورة إلى صورة بتدرج رمادي بشكل أساسي لأن مجموعة البيانات تتكون من صور بتدرج رمادي وأيضًا لأن تحويل النسخة الأصلية إلى صورة بتدرج رمادي سيؤدي إلى زيادة التباين بين الحبر والورق.

        // إليك الشكل الذي تبدو عليه الصورة بعد تحويل التدرج الرمادي grayscale conversion.


        // الخطوة 3: معالجة الصور
        // يتم تطبيق دوال معالجة الصور image processing المتعددة من أجل تعزيز التباين contrast وفصل النص المكتوب بخط اليد عن الخلفية. سلسلة عمليات معالجة الصور المطبقة هي كما يلي –

        // absdiff: تحسب هذه الدالة الفرق بين كل زوج من العناصر المتناظرة في المصفوفات المحددة. لتطبيق هذه الدالة، يتم إنشاء نسخة من الصورة ذات التدرج الرمادي وتطبيق التمويه المتوسط median blur عليها. يأخذ التمويه المتوسط متوسط جميع وحدات البكسل الموجودة أسفل منطقة kernel ويتم استبدال العنصر المركزي بهذه القيمة المتوسطة. تقوم الدالة absdiff بعد ذلك بحساب الفرق بين الصورة ذات التدرج الرمادي والصورة مع تطبيق التمويه المتوسط. تساعد هذه العملية على إزالة أي تشويش من الصورة.
        // normalize: تعمل دالة التسوية normalize function على تسوية الصورة بحيث تكون القيمة الدنيا لأي بكسل هي 0 والقيمة القصوى هي 255. تم تحديد NORM_MINMAX normType لتنفيذ هذه العملية.
        // morphologyEx: يتم تطبيق morphologyEx مع عامل التشغيل الافتتاحي opening operator. يساعد هذا في تقليل أي تشويش قد يكون موجودًا في الصورة.
        // clahe: CLAHE أو معادلة الرسم البياني التكيفي المحدودة للتباين Contrast Limited Adaptive Histogram Equalization هي آخر عامل معالجة للصور يتم تطبيقه على الصورة. يساعد على زيادة تباين الصورة المحددة. وهذا يساعد على جعل تحديد الكونتور contour أكثر دقة.
        // وإليك ما تبدو عليه الصورة بعد تطبيق كافة عمليات معالجة الصور على الصورة. يمكننا أن نرى أن التباين قد تم تعزيزه وتمت إزالة أي ظلال موجودة إلى حد ما.


        // الخطوة 4: العتبة
        // يتم استخدام دالة العتبة threshold function لتطبيق العتبة. لكل بكسل، يتم تطبيق نفس قيمة العتبة. إذا كانت قيمة البكسل أصغر من العتبة، يتم تعيينها على 0، وإلا يتم تعيينها على القيمة القصوى. يؤدي هذا إلى إنشاء صورة لقيم البكسل الثنائية.

        // إليك ما تبدو عليه الصورة بعد تطبيق عملية العتبة. يمكننا أن نرى أنه تم فصل الخلفية والمقدمة (النص) بشكل واضح.


        // الخطوة 5: الكشف عن الكونتور
        // يمكن تفسير الكونتور Contours ببساطة على أنها منحنى يربط جميع النقاط المستمرة (على طول الحدود)، ولها نفس اللون أو الشدة. تعتبر الخطوط الكونتورية أداة مفيدة لتحليل الشكل واكتشاف الكائنات والتعرف عليها. يمكننا استخدام هذه التقنية للعثور على الأحرف الفردية في الصورة. يمكن بعد ذلك اقتصاص هذه الأحرف وإرسالها إلى النموذج لأداء مهمة تصنيف الأحرف.

        // توضح الصورة أدناه كيفية اكتشاف الكونتور من صورة العتبة ونحصل على مربعات الاحاطة bounding boxes لكل حرف.


        // الخطوة 6: الاقتصاص والتعرف على الأحرف
        // بعد العثور على مربعات الاحاطة بجميع الأحرف الفردية في الصورة، يمكننا اقتصاص الأحرف الفردية لتسهيل تنفيذ مهمة التعرف على الأحرف. وفي الوقت نفسه، يتم تجميع الأحرف معًا من خلال الأخذ في الاعتبار إحداثيات x وy لمربعات الاحاطة. يتيح لنا القيام بذلك دمج التوقعات لاحقًا لتكوين كلمات والحصول في النهاية على اسم الدواء في الوصفة الطبية المحددة.

        // إليك ما تبدو عليه الأحرف بعد أن نقوم بقصها وتجميعها/ترتيبها وفقًا لإحداثيات x وy لمربعات الاحاطة بها.


        // الخطوة 7: النتيجة
        // بعد إجراء جميع التنبؤات، يتم دمج المجموعات من أجل الحصول على الكلمات. بعد أن نحصل على الكلمات المتوقعة (اسم الدواء)، يتم تمرير النتيجة من خلال خوارزمية المطابقة. يتم ذلك لإزالة أي أخطاء في التنبؤ. (على سبيل المثال: في بعض الأحيان قد يتم توقع اسم الدواء 'crocin' على أنه 'crocim') بعد إزالة هذه الأخطاء، نحصل على الاسم الكامل للدواء ويمكننا استخدامه للبحث عن مزيد من المعلومات حول الدواء في قاعدة بيانات الأدوية.
 *@



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Medical Assistant UI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
            --text-color: #e0e0e0;
            --input-bg: rgba(255, 255, 255, 0.08);
            --user-msg-bg: #3a3a3a;
            --bot-msg-bg: #4a4a4a;
            --icon-filter: invert(100%);
            --shadow-color: rgba(0,0,0,0.25);
            --shadow-hover: rgba(0,0,0,0.45);
            --loading-color: #bbb;
            --primary-color: #4a89dc;
            --secondary-color: #3bafda;
            --accent-color: #5d9cec;
            --success-color: #48cfad;
            --radius-lg: 20px;
            --radius-md: 12px;
            --transition-fast: 0.25s ease;
            --transition-med: 0.45s ease;
        }

        .light-mode {
            --bg-gradient: linear-gradient(135deg, #8fa3c2, #6d84a7, #5a6f8c);
            --text-color: #0a0a0a;
            --input-bg: rgba(180, 180, 180, 0.95);
            --user-msg-bg: #7a9cc2;
            --bot-msg-bg: #6d7b8c;
            --icon-filter: invert(20%);
            --shadow-color: rgba(0, 0, 0, 0.3);
            --shadow-hover: rgba(0, 0, 0, 0.4);
            --loading-color: #333333;
            --primary-color: #1a3d6d;
            --secondary-color: #005999;
            --accent-color: #2a4a7a;
        }

        * {
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', 'Cairo', sans-serif;
            transition: all 0.3s ease;
        }

        html, body {
            height: 100%;
        }

        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-gradient);
            color: var(--text-color);
            display: flex;
            overflow: hidden;
            animation: gradientBG 18s ease infinite;
        }

        input[type="text"] {
            font-family: 'Inter', 'Segoe UI', 'Cairo', sans-serif;
            font-size: 1.08rem;
            font-weight: 500;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 250px;
            height: 100vh;
            background: var(--input-bg);
            backdrop-filter: blur(6px);
            box-shadow: 2px 0 12px var(--shadow-color);
            display: flex;
            flex-direction: column;
            padding: 25px 18px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) transparent;
            transition: transform var(--transition-med);
            z-index: 1000;
        }

            .sidebar:hover {
                box-shadow: 4px 0 18px var(--shadow-hover);
            }

        .logo-container {
            margin-bottom: 22px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            padding-bottom: 18px;
            text-align: center;
        }

            .logo-container img {
                max-width: 180px;
            }

        .sidebar h3 {
            margin-bottom: 15px;
            font-weight: 700;
            color: var(--text-color);
            font-size: 1.2rem;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        #specialties-list, #chat-history {
            list-style: none;
            max-height: calc(100vh - 320px);
            overflow-y: auto;
            padding-right: 8px;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) transparent;
        }

        .specialty-item, .history-item {
            margin: 8px 0;
            padding: 10px 15px;
            border-radius: var(--radius-md);
            background: rgba(255,255,255,0.08);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: 1rem;
            color: var(--text-color);
            border-left: 3px solid transparent;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

            .specialty-item:hover, .history-item:hover {
                transform: translateX(6px);
                background: rgba(255,255,255,0.18);
                border-left-color: var(--primary-color);
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }

        #train-btn {
            margin-top: auto;
            padding: 10px 16px;
            background: var(--success-color);
            border: none;
            color: #fff;
            font-weight: 600;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: background var(--transition-fast);
        }

            #train-btn:hover {
                background: var(--accent-color);
            }

        .container {
            flex: 1;
            margin-left: 250px;
            padding: 20px 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            overflow-y: auto;
        }

        h1 {
            margin-top: 30px;
            font-size: 2.3rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
        }

        #chat-output {
            width: 100%;
            max-width: 650px;
            max-height: 58vh;
            overflow-y: auto;
            background: var(--input-bg);
            padding: 30px;
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 25px var(--shadow-color), inset 0 1px 1px rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            gap: 20px;
            scroll-behavior: smooth;
            scrollbar-width: thin;
            scrollbar-color: transparent transparent;
            padding-right: 4px;
            transition: scrollbar-color 0.3s;
            border: 1px solid rgba(255,255,255,0.1);
        }

            #chat-output p {
                margin: 0;
                padding: 12px 16px;
                border-radius: var(--radius-md);
                max-width: 84%;
                word-wrap: break-word;
                line-height: 1.6;
                font-size: 1.15rem;
                animation: fadeIn 0.4s ease-out;
                position: relative;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }

        .bot-message {
            background: var(--bot-msg-bg);
            align-self: flex-start;
            color: #fff;
            text-align: right;
            border-bottom-left-radius: 4px;
            border-top-left-radius: var(--radius-md);
            border-top-right-radius: var(--radius-md);
            border-bottom-right-radius: var(--radius-md);
        }

            .bot-message::before {
                content: "";
                position: absolute;
                left: -8px;
                top: 12px;
                width: 0;
                height: 0;
                border-top: 8px solid transparent;
                border-bottom: 8px solid transparent;
                border-right: 8px solid var(--bot-msg-bg);
            }

        .user-message {
            background: var(--user-msg-bg);
            align-self: flex-end;
            color: #fff;
            text-align: left;
            border-bottom-right-radius: 4px;
            border-top-left-radius: var(--radius-md);
            border-top-right-radius: var(--radius-md);
            border-bottom-left-radius: var(--radius-md);
        }

            .user-message::after {
                content: "";
                position: absolute;
                right: -8px;
                top: 12px;
                width: 0;
                height: 0;
                border-top: 8px solid transparent;
                border-bottom: 8px solid transparent;
                border-left: 8px solid var(--user-msg-bg);
            }

        .input-container input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-color);
            font-size: 1.05rem;
            outline: none;
        }

        .input-container {
            width: 100%;
            max-width: 650px;
            background: var(--input-bg);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            padding: 16px 24px;
            box-shadow: 0 6px 20px var(--shadow-color), inset 0 1px 1px rgba(255,255,255,0.1);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.15);
            gap: 16px;
            transition: all 0.3s ease;
        }

            .input-container:focus-within {
                box-shadow: 0 8px 25px var(--shadow-hover), inset 0 1px 1px rgba(255,255,255,0.2);
                transform: translateY(-2px);
            }

            .input-container input {
                flex: 1;
                background: transparent;
                border: none;
                color: var(--text-color);
                font-size: 1.15rem;
                outline: none;
                padding: 8px 12px;
            }

        #send-btn {
            background: var(--primary-color);
            border: none;
            color: #fff;
            font-weight: 600;
            padding: 10px 24px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(74, 137, 220, 0.3);
        }

            #send-btn:hover {
                background: var(--secondary-color);
                transform: translateY(-2px);
                box-shadow: 0 6px 16px rgba(59, 175, 218, 0.4);
            }

            #send-btn:active {
                transform: translateY(0);
            }

            #send-btn:disabled {
                background-color: #cccccc !important;
                cursor: not-allowed !important;
                transform: none !important;
                box-shadow: none !important;
            }

        .loading-dots {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

            .loading-dots span {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: var(--loading-color);
                animation: pulse 1.4s infinite ease-in-out;
            }

                .loading-dots span:nth-child(2) {
                    animation-delay: 0.2s;
                }

                .loading-dots span:nth-child(3) {
                    animation-delay: 0.4s;
                }

        #mode-toggle {
            position: fixed;
            top: 18px;
            right: 18px;
            background: var(--input-bg);
            border: 1px solid rgba(255,255,255,0.12);
            color: var(--text-color);
            padding: 8px 16px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            backdrop-filter: blur(4px);
            transition: background var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 1000;
        }

            #mode-toggle:hover {
                background: rgba(255,255,255,0.2);
            }

            #mode-toggle i {
                filter: var(--icon-filter);
            }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.45);
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .modal-content {
            background: var(--bot-msg-bg);
            color: var(--text-color);
            border-radius: var(--radius-lg);
            padding: 32px 28px;
            width: 92%;
            max-width: 430px;
            display: flex;
            flex-direction: column;
            gap: 14px;
            position: relative;
            box-shadow: 0 8px 30px var(--shadow-color);
            animation: scaleIn 0.35s ease;
        }

        chat-message {
            font-family: 'Inter', 'Segoe UI', 'Cairo', sans-serif;
            font-size: 1.1rem;
        }

        button {
            font-family: 'Inter', 'Segoe UI', 'Cairo', sans-serif;
            font-weight: 600;
        }

        .modal-content input,
        .modal-content textarea,
        .modal-content select {
            padding: 10px 12px;
            border-radius: var(--radius-md);
            border: 1px solid rgba(255,255,255,0.15);
            background: var(--input-bg);
            color: var(--text-color);
            font-size: 0.95rem;
            resize: vertical;
        }

        .modal-content button {
            background: var(--success-color);
            border: none;
            color: #fff;
            padding: 10px;
            border-radius: var(--radius-md);
            font-weight: 600;
            cursor: pointer;
            transition: background var(--transition-fast);
        }

            .modal-content button:hover {
                background: var(--accent-color);
            }

        .close {
            position: absolute;
            top: 12px;
            right: 16px;
            font-size: 1.4rem;
            cursor: pointer;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
            border: 2px solid transparent;
            background-clip: content-box;
        }

            ::-webkit-scrollbar-thumb:hover {
                background: var(--secondary-color);
            }

        .autocomplete-container {
            position: relative;
            width: 100%;
        }

        .autocomplete-results {
            position: absolute;
            bottom: 100%;
            left: 0;
            right: 0;
            max-height: 200px;
            overflow-y: auto;
            background: var(--bot-msg-bg);
            border-radius: var(--radius-md);
            box-shadow: 0 4px 12px var(--shadow-color);
            z-index: 100;
            display: none;
            margin-bottom: 8px;
        }

        .autocomplete-item {
            padding: 10px 16px;
            cursor: pointer;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            transition: background var(--transition-fast);
        }

            .autocomplete-item:hover {
                background: rgba(255,255,255,0.1);
            }

        .autocomplete-highlight {
            color: var(--accent-color);
            font-weight: bold;
        }

        .autocomplete-item {
            padding: 10px;
            cursor: pointer;
        }

        .autocomplete-active {
            background-color: #0d6efd;
            color: white;
        }

        .header-image {
            text-align: center;
            margin-bottom: 10px;
        }

        .header-img {
            width: 250px;
            height: auto;
        }

        .loading-dots {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

            .loading-dots span {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: var(--loading-color);
                animation: pulse 1.4s infinite ease-in-out;
            }

                .loading-dots span:nth-child(2) {
                    animation-delay: 0.2s;
                }

                .loading-dots span:nth-child(3) {
                    animation-delay: 0.4s;
                }

        .new-chat-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 14px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
            cursor: pointer;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(74, 137, 220, 0.2);
            font-size: 0.9em;
            min-width: 120px;
        }

            .new-chat-button:hover {
                background: var(--secondary-color);
                box-shadow: 0 4px 12px rgba(59, 175, 218, 0.3);
                transform: scale(1.02);
            }

            .new-chat-button:active {
                transform: scale(0.98);
            }

            .new-chat-button i {
                font-size: 0.9em;
            }

        .history-item {
            position: relative;
            padding-right: 25px;
        }

            .history-item .delete-history {
                position: absolute;
                right: 5px;
                top: 50%;
                transform: translateY(-50%);
                color: #ff6b6b;
                cursor: pointer;
                opacity: 0;
                transition: opacity 0.2s;
            }

            .history-item:hover .delete-history {
                opacity: 1;
            }

        .tab-buttons {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .tab-button {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

            .tab-button.active {
                border-bottom: 2px solid var(--primary-color);
                color: var(--primary-color);
            }

        .tab-content {
            display: none;
        }

            .tab-content.active {
                display: block;
            }

        /* New styles for file upload */
        .file-upload-wrapper {
            position: relative;
            display: none;
            margin-top: 10px;
            padding: 10px;
            border-radius: var(--radius-md);
            background: rgba(255,255,255,0.1);
        }

            .file-upload-wrapper.active {
                display: block;
            }

            .file-upload-wrapper.file-attached,
            .file-upload-wrapper.img-attached {
                display: flex;
                align-items: center;
                gap: 10px;
            }

        .file-preview {
            max-width: 50px;
            max-height: 50px;
            border-radius: var(--radius-md);
            display: none;
        }

        .file-upload-wrapper.file-attached .file-preview,
        .file-upload-wrapper.img-attached .file-preview {
            display: block;
        }

        .file-upload-wrapper .file-info {
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .file-upload-wrapper .cancel-btn {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Image attachment in chat */
        .img-attachment {
            max-width: 100%;
            max-height: 200px;
            border-radius: var(--radius-md);
            margin-top: 10px;
        }

        /* File attachment in chat */
        .file-attachment {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 8px 12px;
            background: rgba(255,255,255,0.1);
            border-radius: var(--radius-md);
            margin-top: 10px;
        }

        /* Stop response button */
        #stop-response-btn {
            display: none;
            background: #d62939;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: var(--radius-md);
            cursor: pointer;
        }

        body.bot-responding #stop-response-btn {
            display: inline-flex;
        }

        /* Add file button */
        #add-file-btn {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Hide file input */
        #file-input {
            display: none;
        }
    </style>
</head>
<body>
    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
        <div class="logo-container">
            <img src="~/images/Logo3.png" alt="Logo" />
        </div>
        <button id="new-chat-btn" class="new-chat-button">
            <i class="fa-solid fa-plus"></i> New chat
        </button>

        <div class="tab-buttons">
            <button class="tab-button active" data-tab="specialties">Specialties</button>
            <button class="tab-button" data-tab="history">History</button>
        </div>

        <div class="tab-content active" id="specialties-tab">
            <h3>Medical Specialties</h3>
            <ul id="specialties-list"></ul>
        </div>

        <div class="tab-content" id="history-tab">
            <h3>Chat History</h3>
            <ul id="chat-history"></ul>
        </div>
    </div>

    <!-- DARK / LIGHT TOGGLE -->
    <button id="mode-toggle" aria-label="Toggle dark/light mode"><i class="fa-solid fa-sun"></i> <span>Light Mode</span></button>

    <!-- MAIN CONTENT -->
    <div class="container">
        <div class="header-image">
            <img src="~/images/Chat.png" alt="Assistant Image" class="header-img" />
        </div>

        <h1>How can I help you?</h1>

        <div id="chat-output"></div>
        <div class="input-container">
            <input type="text" id="chat-input" placeholder="Ask anything" />
            <button id="add-file-btn" title="Attach file">
                <i class="fa-solid fa-paperclip"></i>
            </button>
            <button id="send-btn"><i class="fa-solid fa-paper-plane"></i></button>
            <button id="stop-response-btn">
                <i class="fa-solid fa-stop"></i> Stop
            </button>
            <button id="stop-btn" class="btn-danger" style="display:none;">
                <i class="fas fa-stop"></i> Stop
            </button>
        </div>

        <!-- File upload wrapper -->
        <div class="file-upload-wrapper">
            <img class="file-preview" alt="File preview" />
            <div class="file-info"></div>
            <button class="cancel-btn" id="cancel-file-btn">
                <i class="fa-solid fa-times"></i>
            </button>
        </div>

        <input type="file" id="file-input" accept="image/*,.pdf,.doc,.docx,.txt" />
    </div>


    <script>


        /*********************************
         *         THEME TOGGLE         *
         *********************************/
        const modeToggleBtn = document.getElementById('mode-toggle');
        const body = document.body;
        modeToggleBtn.addEventListener('click', () => {
            body.classList.toggle('light-mode');
            const spanText = modeToggleBtn.querySelector('span');
            const icon = modeToggleBtn.querySelector('i');
            if (body.classList.contains('light-mode')) {
                spanText.textContent = 'Dark Mode';
                icon.className = 'fa-solid fa-moon';
            } else {
                spanText.textContent = 'Light Mode';
                icon.className = 'fa-solid fa-sun';
            }
        });



          /*********************************
         *        TAB SWITCHING         *
         *********************************/
        document.querySelectorAll('.tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // Remove active class from all buttons and tabs
                document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));

                // Add active class to clicked button and corresponding tab
                button.classList.add('active');
                const tabId = button.getAttribute('data-tab') + '-tab';
                document.getElementById(tabId).classList.add('active');
            });
        });

        /*********************************
         *        SIDEBAR MOBILE        *
         *********************************/
        const sidebar = document.getElementById('sidebar');
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
            }
        });

                /*********************************
         *        SPECIALTIES ARRAY     *
                 * Internal Medicine
                 *
        Psychiatry

        Ophthalmology

        Dermatology

        Pediatrics

        ENT

        Orthopedics

        Cardiology

        Gynecology

        Dentistry

        General Surgery

        Urology

        Neurology

        Oncology

        Endocrinology

        Gastroenterology

        Rheumatology

        Anesthesiology

        Emergency Medicine

        Family Medicine

        Physiotherapy

        Nutrition

        Child Psychiatry
         *********************************/
        const specialties = [
            // باطنة - Internal Medicine
            {
                name: "باطنة",
                lang: "ar",
                keywords: [
                    "تعب", "إرهاق", "ضعف", "فقر دم", "خمول", "نقص وزن", "سخونة", "عرق", "هزال", "تعرق ليلي",
                    "دوخة", "غثيان", "قيء", "إمساك", "إسهال", "انتفاخ", "غازات", "حرقة معدة", "ألم بطني",
                    "تورم", "شحوب", "نزيف", "كدمات", "تغير لون البول", "تغير لون البراز", "ضيق تنفس",
                    "خفقان", "ألم صدر", "سعال", "بلغم", "نزلة برد", "رشح", "زكام", "تهاب حلق", "صداع"
                ],
                response: "الأعراض تشير إلى مشاكل عامة في الجسم مثل فقر الدم أو اضطرابات في الغدد. يُنصح بزيارة طبيب باطنة."
            },
            {
                name: "Internal Medicine",
                lang: "en",
                keywords: [
                    "fatigue", "tired", "weakness", "anemia", "weight loss", "fever", "sweating", "cachexia", "night sweats",
                    "dizziness", "nausea", "vomiting", "constipation", "diarrhea", "bloating", "gas", "heartburn", "abdominal pain",
                    "swelling", "pallor", "bleeding", "bruising", "urine color change", "stool color change", "shortness of breath",
                    "palpitations", "chest pain", "cough", "phlegm", "cold", "runny nose", "sore throat", "headache"
                ],
                response: "Symptoms suggest general body issues like anemia or thyroid disorders. Please visit an internal medicine doctor."
            },
            {
                name: "battna",
                lang: "franco",
                keywords: [
                    "ta3ban", "dagh", "khasayef", "khosool", "khomool", "sokhonia", "3ara2", "hazal",
                    "dawkha", "ghashyan", "ga2y", "emsak", "ishal", "entefakh", "gazat", "7ar2et me3da", "wage3 batn",
                    "waram", "she7ab", "nzeef", "kadamat", "taghyer lon el bol", "taghyer lon el braz", "day2 tanaffos",
                    "kafkan", "wage3 sadr", "shel", "balgham", "nazla", "rash7", "wage3 el 7elg", "sodaa3"
                ],
                response: "El a3rad beteshir le moshkela 3amma, zay anemia. Roh el doctor battna 3ashan ta3mel tahaleel."
            },

            // نفسية - Psychiatry
            {
                name: "أمراض نفسية",
                lang: "ar",
                keywords: [
                    "اكتئاب", "توتر", "قلق", "انعزال", "تفكير زائد", "وسواس", "نوبات هلع", "اضطراب", "أرق", "أفكار سوداوية",
                    "حزن", "بكاء", "يأس", "تشاؤم", "تهيج", "عدوانية", "نرفزة", "تقلب مزاج", "هلاوس", "ضلالات",
                    "اضطراب نوم", "كوابيس", "فقدان شهية", "شراهة", "إدمان", "انسحاب اجتماعي", "خوف", "رهاب", "وساوس",
                    "تفكير في الموت", "إيذاء نفس", "تشتت", "نسيان", "تركيز ضعيف", "اندفاعية", "فرط حركة"
                ],
                response: "الأعراض تدل على اضطراب نفسي. يُنصح بزيارة طبيب نفسي للتقييم والتشخيص."
            },
            {
                name: "Psychiatry",
                lang: "en",
                keywords: [
                    "depression", "anxiety", "stress", "insomnia", "isolation", "OCD", "panic attacks", "mood swings", "suicidal thoughts",
                    "sadness", "crying", "hopelessness", "pessimism", "irritability", "aggression", "nervousness", "mood changes", "hallucinations", "delusions",
                    "sleep disorder", "nightmares", "appetite loss", "binge eating", "addiction", "social withdrawal", "fear", "phobia", "obsessions",
                    "death thoughts", "self harm", "distraction", "forgetfulness", "poor concentration", "impulsivity", "hyperactivity"
                ],
                response: "These symptoms are suggestive of a psychological issue. It's best to consult a psychiatrist."
            },
            {
                name: "nafsya",
                lang: "franco",
                keywords: [
                    "depressed", "anxious", "nafsiya", "mafiishi nafs", "nfsya", "waswas", "hala3at", "ark",
                    "7azen", "beyky", "ya2s", "tasha2om", "teheeg", "3edwania", "nerfeza", "taghayor mood", "halwas", "delusions",
                    "moshkela nowm", "kawabees", "fa2dan shehya", "sharaa", "edman", "en7esab", "khawf", "rahab", "wasawes"
                ],
                response: "Mumkin el a3rad de tkoun nafsya, zay depretion. Roh shoof doctor nafsy."
            },

            // عيون - Ophthalmology
            {
                name: "عيون",
                lang: "ar",
                keywords: [
                    "رؤية", "نظر", "زغللة", "احمرار عين", "حساسية عين", "جفاف عين", "دمعة", "عين دامعة", "ضعف نظر", "عمى ألوان",
                    "ألم عين", "حكة عين", "حرقة عين", "انتفاخ جفن", "إفرازات عين", "تصاق جفون", "بقع سوداء", "وميض", "رؤية مزدوجة",
                    "عوامات", "تشوش رؤية", "رهاب ضوء", "دم في العين", "اصفرار عين", "بياض في العين", "التهاب ملتحمة", "حساسية ضوء",
                    "تدميع", "جحوظ", "انحراف عين", "حول", "رؤية ضبابية", "عدم وضوح", "رؤية هالات", "تغير في الرؤية"
                ],
                response: "المشكلة تبدو متعلقة بالعيون. يُفضل زيارة طبيب عيون للفحص والعلاج."
            },
            {
                name: "Ophthalmology",
                lang: "en",
                keywords: [
                    "vision", "blur", "eye pain", "redness", "itchy eyes", "dry eyes", "tearing", "floaters", "color blindness",
                    "eye ache", "eye itching", "eye burning", "eyelid swelling", "eye discharge", "sticky eyelids", "black spots", "flashes", "double vision",
                    "floaters", "blurred vision", "light sensitivity", "blood in eye", "yellow eyes", "white eye", "conjunctivitis", "light sensitivity",
                    "watering eyes", "bulging eyes", "eye deviation", "squint", "foggy vision", "unclear vision", "halos", "vision changes"
                ],
                response: "The issue seems eye-related. Visit an ophthalmologist for proper diagnosis."
            },
            {
                name: "3yoon",
                lang: "franco",
                keywords: [
                    "nazar", "zaghala", "3eni", "7omor", "hazaza", "goffaf", "dam3a", "3en dame3a",
                    "wage3 3en", "7aka 3en", "7ar2et 3en", "ente7a2 gofon", "efrazat 3en", "tasa2 gofon", "be2a soda", "wamee6", "ro2ya moza3aga",
                    "3awamate", "tashos ro2ya", "rahab daw2", "dam fel 3en", "asfar 3en", "bya6 fel 3en", "eltehab molte7ema", "7asaseya daw2",
                    "tadmee3", "go7ooz", "en7eraf 3en", "7awal", "ro2ya daba2aneya", "3adam wodo7", "ro2ya halat", "taghayor fel ro2ya"
                ],
                response: "Fe moshkela fe el 3yoon. Roh 3and doctor 3yoon a7san."
            },

            // جلدية - Dermatology
            {
                name: "جلدية",
                lang: "ar",
                keywords: [
                    "حكة", "طفح", "احمرار", "حبوب", "أكزيما", "صدفية", "بهاق", "شامة", "تغير لون الجلد", "تقرحات جلدية",
                    "بثور", "دمامل", "قشور", "تشقق جلد", "جفاف جلد", "تورم جلد", "تغير شكل شامة", "حساسية جلد", "هرش",
                    "التهاب جلد", "فطريات", "ثآليل", "نتوءات", "بقع بنية", "بقع بيضاء", "بقع حمراء", "حساسية شمس", "حروق",
                    "تسلخات", "انتفاخ تحت الجلد", "أكياس دهنية", "زوائد جلدية", "تغير ملمس الجلد", "حساسية مستحضرات", "حبوب الشباب"
                ],
                response: "الأعراض تشير إلى مشكلة جلدية. يُنصح بزيارة طبيب جلدية للفحص والعلاج المناسب."
            },
            {
                name: "Dermatology",
                lang: "en",
                keywords: [
                    "itching", "rash", "redness", "acne", "eczema", "psoriasis", "vitiligo", "mole", "skin discoloration", "skin ulcers",
                    "pimples", "boils", "scales", "skin cracking", "dry skin", "skin swelling", "mole changes", "skin allergy", "scratching",
                    "dermatitis", "fungus", "warts", "bumps", "brown spots", "white spots", "red spots", "sun allergy", "burns",
                    "rashes", "subcutaneous swelling", "fatty cysts", "skin tags", "skin texture changes", "cosmetic allergy", "acne"
                ],
                response: "These signs may indicate a skin condition. Please consult a dermatologist."
            },
            {
                name: "gildya",
                lang: "franco",
                keywords: [
                    "7aka", "rash", "homor", "7abob", "eczema", "sadafya", "baha2", "shama",
                    "basoor", "damamel", "2eshora", "tashako2 gilda", "goffaf gilda", "waram gilda", "taghayor shakl shama", "7asaseya gilda", "harash",
                    "eltehab gilda", "fatareyat", "sa2eel", "nata2at", "be2a bonneya", "be2a beyda", "be2a 7amra", "7asaseya shems", "7oro2",
                    "tasalkhat", "ente7a2 ta7t elgilda", "akeyas donya", "zawa2ed gilda", "taghayor melmas elgilda", "7asaseya mosta7darat", "7abob elshabab"
                ],
                response: "El 7ala deh teb2a moshkela fe el gilda. Roh doctor gildya."
            },
                     // أطفال - Pediatrics
            {
                name: "أطفال",
                lang: "ar",
                keywords: [
                    "سخونية", "كحة", "برد", "تسنين", "نزلة", "مغص", "إسهال", "قئ", "تطعيم", "نمو الطفل",
                    "رضاعة", "فقدان شهية", "بكاء مستمر", "تأخر كلام", "تأخر مشي", "نقص وزن", "زيادة وزن", "طفح جلدي", "حساسية",
                    "ربو", "تأخر دراسي", "تبول لا إرادي", "خوف", "عدوانية", "فرط حركة", "تشتت انتباه", "تأخر نمو",
                    "تشنجات", "اصفرار", "نقص مناعة", "التهابات متكررة", "تقيؤ", "امساك", "انتفاخ", "مغص", "سعال ديكي",
                    "حمى", "تقيؤ", "إرهاق", "خمول", "نقص نشاط", "تعرق", "رعشة", "صعوبة تنفس", "زرقة", "شحوب"
                ],
                response: "هذه الأعراض شائعة عند الأطفال. يُنصح بعرض الطفل على طبيب أطفال."
            },
            {
                name: "Pediatrics",
                lang: "en",
                keywords: [
                    "fever", "cough", "cold", "teething", "flu", "colic", "diarrhea", "vomiting", "vaccination", "child growth",
                    "breastfeeding", "loss of appetite", "constant crying", "speech delay", "walking delay", "weight loss", "weight gain", "skin rash", "allergy",
                    "asthma", "academic delay", "bedwetting", "fear", "aggression", "hyperactivity", "attention deficit", "growth delay",
                    "convulsions", "jaundice", "immunodeficiency", "recurrent infections", "vomiting", "constipation", "bloating", "colic", "whooping cough",
                    "fever", "vomiting", "fatigue", "lethargy", "low activity", "sweating", "tremors", "breathing difficulty", "cyanosis", "pallor"
                ],
                response: "These are common symptoms in children. Please consult a pediatrician."
            },
            {
                name: "atfal",
                lang: "franco",
                keywords: [
                    "sokhonia", "kaha", "barrd", "tasneen", "nazla", "mags", "ishal", "ga2y", "ta3teem", "namo eltefl",
                    "rada3a", "fa2dan shehya", "baky mostamer", "ta2akhor kalam", "ta2akhor mashy", "no2s weight", "ziada weight", "tafah gildy", "7asaseya",
                    "rabo", "ta2akhor darsy", "bol la erady", "khawf", "3edwania", "fart 7araka", "tashtot entebaah", "ta2akhor namo",
                    "tashanogat", "asfar", "no2s mena3a", "eltehabat motakarra", "ga2y", "emsak", "entefakh", "mags", "kah el deek",
                    "7omma", "ga2y", "erha2", "khamool", "no2s nashat", "3ara2", "ra3sha", "so3oba tanaffos", "zar2a", "she7ab"
                ],
                response: "De a3rad atfal mashhoora. Shoof doctor atfal."
            },

            // أنف وأذن - ENT
            {
                name: "أنف وأذن",
                lang: "ar",
                keywords: [
                    "احتقان", "انسداد أنف", "طنين", "دوخة", "ألم أذن", "التهاب لوز", "شخير", "فقدان سمع", "التهاب جيوب", "رعاف",
                    "نزيف أنف", "ضعف سمع", "ألم وجه", "ضغط أذن", "إفرازات أذن", "حكة أذن", "تورم لوز", "بحة صوت", "ألم بلعوم",
                    "سعال مزمن", "جفاف حلق", "رائحة فم كريهة", "تغير صوت", "صعوبة بلع", "شعور بجسم غريب", "التهاب أذن وسطى",
                    "دوار", "غثيان", "قيء", "عدم اتزان", "ألم أسنان", "تورم غدد", "ألم رقبة", "تقيح لوز", "حساسية أنف",
                    "عطس متكرر", "حكة أنف", "إفرازات أنف", "تنفس فموي", "توقف تنفس أثناء النوم"
                ],
                response: "الأعراض تدل على مشاكل في الأنف أو الأذن. يُفضل زيارة طبيب أنف وأذن."
            },
            {
                name: "ENT",
                lang: "en",
                keywords: [
                    "congestion", "nasal block", "ear pain", "dizziness", "ringing", "tonsillitis", "snoring", "hearing loss", "sinusitis", "nosebleed",
                    "nasal bleeding", "hearing impairment", "facial pain", "ear pressure", "ear discharge", "ear itching", "tonsil swelling", "hoarseness", "pharynx pain",
                    "chronic cough", "dry throat", "bad breath", "voice change", "swallowing difficulty", "foreign body sensation", "otitis media",
                    "vertigo", "nausea", "vomiting", "imbalance", "toothache", "gland swelling", "neck pain", "tonsil pus", "nasal allergy",
                    "frequent sneezing", "nasal itching", "nasal discharge", "mouth breathing", "sleep apnea"
                ],
                response: "Symptoms suggest ENT issues. Visit an otolaryngologist."
            },
            {
                name: "anf wedn",
                lang: "franco",
                keywords: [
                    "e7tekan", "ensedad enf", "6aneen", "dawkha", "wage3 wedn", "eltehab loz", "5akheer", "fa2dan sam3", "eltehab guyob", "ra3af",
                    "nzeef enf", "da3f sam3", "wage3 weesh", "daght wedn", "efrazat wedn", "7aka wedn", "waram loz", "ba7et sout", "wage3 bel3om",
                    "shel menem", "goffaf 7elg", "rey7a fom kareha", "taghyer sout", "so3oba bel3", "7es begesm gareeb", "eltehab wedn wosta",
                    "dawar", "ghashyan", "ga2y", "adam etzan", "wage3 senan", "waram gland", "wage3 ra2aba", "2ay7 loz", "7asaseya enf",
                    "3atas motekarer", "7aka enf", "efrazat enf", "tanaffos fomy", "wa2f tanaffos"
                ],
                response: "El a3rad fe el wedn aw el enf. Roh doctor enf wedn."
            },

            // عظام - Orthopedics
            {
                name: "عظام",
                lang: "ar",
                keywords: [
                    "كسر", "ألم ظهر", "روماتيزم", "مفاصل", "تورم ركبة", "انزلاق غضروفي", "هشاشة عظام", "تمزق أربطة", "ألم كتف", "ألم عنق",
                    "ألم رسغ", "ألم كوع", "ألم قدم", "ألم ركبة", "ألم فخذ", "ألم ساق", "ألم كعب", "تورم مفصل", "تيبس مفاصل",
                    "تشوه عظام", "قصر قدم", "اعوجاج عمود فقري", "انحناء ظهر", "ألم عصعص", "خشونة مفاصل", "التهاب أوتار", "التهاب كيسي",
                    "ضعف عظام", "ألم عند الحركة", "صعوبة حركة", "تقلص عضلات", "تنميل أطراف", "ضعف قبضة يد", "ألم عند الوقوف", "ألم عند الجلوس",
                    "ألم عند الصعود", "ألم عند النزول", "طقطقة مفاصل", "ضعف مشط القدم", "ألم أسفل الظهر"
                ],
                response: "المشكلة تخص العظام أو المفاصل. يُنصح بزيارة طبيب عظام."
            },
            {
                name: "Orthopedics",
                lang: "en",
                keywords: [
                    "fracture", "back pain", "arthritis", "joint", "knee swelling", "herniated disc", "osteoporosis", "ligament tear", "shoulder pain", "neck pain",
                    "wrist pain", "elbow pain", "foot pain", "knee pain", "thigh pain", "leg pain", "heel pain", "joint swelling", "joint stiffness",
                    "bone deformity", "short foot", "spinal curvature", "back curvature", "coccyx pain", "joint roughness", "tendonitis", "bursitis",
                    "bone weakness", "pain on movement", "movement difficulty", "muscle spasm", "limb numbness", "weak grip", "pain when standing", "pain when sitting",
                    "pain when climbing", "pain when descending", "joint cracking", "metatarsal pain", "lower back pain"
                ],
                response: "These symptoms indicate orthopedic issues. Please visit a specialist."
            },
            {
                name: "3zam",
                lang: "franco",
                keywords: [
                    "kasr", "wage3 dahar", "rheumatism", "mafasil", "rukba", "ghadroof", "hashasha", "tamzok", "wage3 ketf", "wage3 enek",
                    "wage3 resg", "wage3 koo3", "wage3 adam", "wage3 rukba", "wage3 fakhd", "wage3 sa2", "wage3 ka3b", "waram mafsal", "teyebs mafasel",
                    "tashweeh 3zam", "2asar adam", "e3wegam 3amood fikry", "en7ena dahar", "wage3 3a3s", "khoshona mafasel", "eltehab awtar", "eltehab keesy",
                    "da3f 3zam", "wage3 7en el7araka", "so3oba 7araka", "ta2alos 3adalat", "tanmeel atraf", "da3f 2abda", "wage3 7en elokof", "wage3 7en elgo3ood",
                    "wage3 7en elso3ood", "wage3 7en elnozool", "6a6a2a mafasel", "da3f mes6 eladam", "wage3 asfal el dahar"
                ],
                response: "Momken tkoun moshkela fe el 3zam. Shoof doctor 3zam."
            },

            // قلب - Cardiology
            {
                name: "قلب",
                lang: "ar",
                keywords: [
                    "خفقان", "ضيق تنفس", "ألم صدر", "دوخة", "ارتفاع ضغط", "هبوط ضغط", "تورم قدمين", "إغماء", "نبض سريع", "ذبحة صدرية",
                    "تعب سريع", "ألم ذراع", "ألم فك", "عرق بارد", "زرقة شفاه", "زرقة أطراف", "غثيان", "قيء", "دوخة عند الوقوف", "خفقان عند النوم",
                    "ألم منتصف الصدر", "ألم يشع للذراع", "ضربات غير منتظمة", "توقف قلب", "نوبة قلبية", "جلطة", "شريان مسدود", "قصور قلب",
                    "تضخم قلب", "صعوبة تنفس عند الاستلقاء", "سعال ليلي", "زيادة وزن سريعة", "تورم بطن", "ألم أعلى البطن", "ارتفاع كوليسترول", "سكري",
                    "تدخين", "وراثة قلبية", "ألم عند المشي", "توقف عن الحركة", "برودة أطراف"
                ],
                response: "هذه الأعراض تشير إلى مشكلة في القلب. يُنصح بالتوجه لطبيب قلب فورًا."
            },
            {
                name: "Cardiology",
                lang: "en",
                keywords: [
                    "palpitations", "shortness of breath", "chest pain", "dizziness", "high blood pressure", "low blood pressure", "swollen feet", "fainting", "rapid pulse", "angina",
                    "quick fatigue", "arm pain", "jaw pain", "cold sweat", "lip cyanosis", "limb cyanosis", "nausea", "vomiting", "dizziness when standing", "palpitations when sleeping",
                    "mid-chest pain", "radiating arm pain", "irregular beats", "cardiac arrest", "heart attack", "clot", "blocked artery", "heart failure",
                    "heart enlargement", "breathing difficulty when lying", "night cough", "rapid weight gain", "abdominal swelling", "upper abdominal pain", "high cholesterol", "diabetes",
                    "smoking", "cardiac heredity", "pain when walking", "stopping movement", "cold limbs"
                ],
                response: "This could be a heart condition. Please consult a cardiologist immediately."
            },
            {
                name: "alb",
                lang: "franco",
                keywords: [
                    "kafkan", "day2 tanaffos", "wage3 sadr", "dawkha", "ertefa2 da8t", "hobot da8t", "waram adam", "eghma2", "nabd saree3", "zab7a sadreya",
                    "ta3ab saree3", "wage3 dera3", "wage3 fak", "3arak bared", "zar2a shefaef", "zar2a atraf", "ghashyan", "ga2y", "dawkha 7en elokof", "kafkan 7en elnom",
                    "wage3 menas el sadr", "wage3 beyesh3a lel dera3", "darabat gheyr montazema", "wa2f alb", "noba 2albeeya", "galta", "shareyan mesdod", "2asor alb",
                    "takhom alb", "so3obat tanaffos 7en elestelka2", "shel leily", "zedet weight saree3a", "waram batn", "wage3 a3la el batn", "ertefa2 kolesterol", "sokary",
                    "tedkheen", "weratha 2albeeya", "wage3 7en elmashy", "wa2f 3an el7araka", "bord atraf"
                ],
                response: "El kalam dah momken yeb2a moshkela fe el alb. Roh doctor alb."
            },

            // نساء وتوليد - Gynecology
            {
                name: "نساء وتوليد",
                lang: "ar",
                keywords: [
                    "حمل", "طمث", "دورة", "نزيف", "تأخر حمل", "تكيس مبايض", "ألم جماع", "إفرازات", "حمل خارج الرحم", "انقطاع طمث",
                    "ألم أسفل البطن", "ألم حوض", "نزيف بعد الجماع", "نزيف بين الدورات", "غزارة طمث", "تأخر دورة", "عدم انتظام دورة", "ألم ثدي", "تكتل ثدي",
                    "إفرازات دموية", "حكة مهبلية", "رائحة كريهة", "جفاف مهبلي", "ألم تبويض", "تقلصات رحمية", "ورم ليفي", "هبوط رحم", "سلس بول",
                    "ألم أثناء التبول", "حرقان بول", "تكرار تبول", "التهابات متكررة", "فحص حمل", "متابعة حمل", "تسمم حمل", "سكري حمل", "ضغط حمل",
                    "نزيف حمل", "مغص حمل", "تقيؤ حمل", "تعب حمل", "دوخة حمل", "تورم حمل", "تحاليل حمل", "أشعة حمل"
                ],
                response: "الأعراض مرتبطة بصحة المرأة. يُفضل استشارة طبيب نساء وتوليد."
            },
            {
                name: "Gynecology",
                lang: "en",
                keywords: [
                    "pregnancy", "period", "bleeding", "fertility", "cycle delay", "PCOS", "painful intercourse", "discharge", "ectopic pregnancy", "menopause",
                    "lower abdominal pain", "pelvic pain", "postcoital bleeding", "intermenstrual bleeding", "heavy periods", "delayed period", "irregular periods", "breast pain", "breast lump",
                    "bloody discharge", "vaginal itching", "bad odor", "vaginal dryness", "ovulation pain", "uterine cramps", "fibroid", "uterine prolapse", "urinary incontinence",
                    "painful urination", "burning urination", "frequent urination", "recurrent infections", "pregnancy test", "pregnancy follow-up", "preeclampsia", "gestational diabetes", "pregnancy hypertension",
                    "pregnancy bleeding", "pregnancy colic", "pregnancy vomiting", "pregnancy fatigue", "pregnancy dizziness", "pregnancy swelling", "pregnancy tests", "pregnancy scan"
                ],
                response: "These symptoms relate to female reproductive health. Consult a gynecologist."
            },
            {
                name: "nisaa",
                lang: "franco",
                keywords: [
                    "7aml", "dawra", "dam", "ta2akhor", "nzeef", "takyeess", "wage3 gema3", "efrazat", "7aml khareg el ra7m", "enqeta3 6ams",
                    "wage3 asfal el batn", "wage7 7owd", "nzeef ba3d elgema3", "nzeef ben el dorat", "ghazara 6ams", "ta2akhor dawra", "3adam entezam dawra", "wage3 seda", "ketla seda",
                    "efrazat damawia", "7aka mehbalia", "rey7a kareha", "goffaf mehbali", "wage3 tabweed", "ta2alosat ra7meya", "waram leefy", "hobot ra7m", "selees bol",
                    "wage3 7en elbol", "7ar2et bol", "takrar bol", "eltehabat motakarra", "fahs 7aml", "metabe3a 7aml", "tasmom 7aml", "sokary 7aml", "da8t 7aml",
                    "nzeef 7aml", "mags 7aml", "ga2y 7aml", "ta3ab 7aml", "dawkha 7aml", "waram 7aml", "t7aleel 7aml", "ash3a 7aml"
                ],
                response: "El a3rad deh nisaa. Rohy doctor nisaa wetawleed."
            },

            // أسنان - Dentistry
            {
                name: "أسنان",
                lang: "ar",
                keywords: [
                    "ألم سن", "تسوس", "خلع", "تورم لثة", "رائحة فم", "نزيف لثة", "حساسية أسنان", "تقويم", "زراعة أسنان", "خراج سني",
                    "ألم ضرس", "ألم عند المضغ", "ألم عند شرب بارد", "ألم عند شرب ساخن", "تساقط أسنان", "تصبغ أسنان", "اصفرار أسنان", "تراكم جير", "التهاب عصب",
                    "حشو", "تلبيس", "جسر", "تهاب ما بعد الخلع", "ألم فك", "صرير أسنان", "فك مقفل", "صعوبة فتح الفم", "تقرحات فم",
                    "فطريات فم", "لسان أبيض", "نمو زائد لثة", "تراجع لثة", "فراغات أسنان", "اعوجاج أسنان", "بروز أسنان", "أسنان متزاحمة", "أسنان متباعدة",
                    "أسنان لبنية", "أسنان دائمة", "تبديل أسنان", "أسنان أمامية", "أسنان خلفية", "ضرس عقل", "ضرس مطمور", "التهاب ضرس العقل"
                ],
                response: "الأعراض تشير إلى مشاكل في الأسنان. يُفضل زيارة طبيب أسنان."
            },
            {
                name: "Dentistry",
                lang: "en",
                keywords: [
                    "toothache", "decay", "extraction", "gum swelling", "bad breath", "bleeding gums", "sensitive teeth", "braces", "dental implant", "dental abscess",
                    "molar pain", "pain when chewing", "pain with cold drinks", "pain with hot drinks", "tooth loss", "tooth discoloration", "yellow teeth", "tartar buildup", "nerve inflammation",
                    "filling", "crown", "bridge", "post-extraction infection", "jaw pain", "teeth grinding", "locked jaw", "difficulty opening mouth", "mouth ulcers",
                    "oral thrush", "white tongue", "gum overgrowth", "receding gums", "gaps between teeth", "crooked teeth", "protruding teeth", "crowded teeth", "spaced teeth",
                    "baby teeth", "permanent teeth", "teeth replacement", "front teeth", "back teeth", "wisdom tooth", "impacted tooth", "wisdom tooth infection"
                ],
                response: "These symptoms suggest dental issues. Visit a dentist for treatment."
            },
            {
                name: "asnann",
                lang: "franco",
                keywords: [
                    "wage3 sen", "tasaws", "khal3", "lassa", "rey7a", "nzeef lesa", "7asaseya", "t2weem", "zar3a", "kharage seny",
                    "wage3 ders", "wage3 7en elmadh", "wage3 7en shorb bared", "wage3 7en shorb sakhon", "tasakot asnan", "tasbegh asnan", "asfar asnan", "trakom gear", "eltehab 3asab",
                    "7ashw", "talbis", "gesr", "eltehab ba3d elkhal3", "wage3 fak", "sareer asnan", "fak mo2afel", "so3oba fath elfam", "ta2aree7 fam",
                    "fatareyat fam", "lesan abyad", "namo zayed lesa", "terage3 lesa", "faraghat asnan", "e3wegam asnan", "boroz asnan", "asnan motaza7ema", "asnan motaba3eda",
                    "asnan labaneya", "asnan dameema", "tabdeel asnan", "asnan amameya", "asnan khalfeya", "ders 3a2l", "ders matmor", "eltehab ders el3a2l"
                ],
                response: "De moshkela fe asnanak. Roh doctor asnan."
            },


         // جراحة عامة - General Surgery
        {
            name: "جراحة عامة",
            lang: "ar",
            keywords: [
                "فتق", "زائدة", "مرارة", "استئصال", "ورم", "خراج", "التهاب زائدة", "حصوة مرارة", "جرح", "عمليات",
                "ألم جانب", "ألم يمين البطن", "ألم يسار البطن", "ألم سرة", "غثيان", "قيء", "إمساك", "إسهال", "انتفاخ", "غازات",
                "نزيف شرجي", "بواسير", "شرخ شرجي", "ناسور", "سلس براز", "سلس غازات", "تغير عادات التبرز", "دم في البراز", "براز أسود",
                "براز رفيع", "ألم بعد الأكل", "شبع سريع", "ارتجاع", "حرقة أعلى البطن", "صعوبة بلع", "تقيؤ دم", "براز دموي", "اصفرار",
                "حكة جلد", "تورم غدد", "كتلة في البطن", "كتلة في العنق", "كتلة في الإبط", "كتلة في المغبن", "تغير لون الجلد", "تعرق ليلي"
            ],
            response: "هذه الحالة قد تتطلب تدخل جراحي. يُنصح بزيارة طبيب جراحة عامة."
        },
        {
            name: "General Surgery",
            lang: "en",
            keywords: [
                "hernia", "appendix", "gallbladder", "removal", "tumor", "abscess", "appendicitis", "gallstones", "wound", "surgery",
                "flank pain", "right abdominal pain", "left abdominal pain", "belly button pain", "nausea", "vomiting", "constipation", "diarrhea", "bloating", "gas",
                "anal bleeding", "hemorrhoids", "anal fissure", "fistula", "fecal incontinence", "gas incontinence", "bowel habit changes", "blood in stool", "black stool",
                "thin stool", "pain after eating", "early satiety", "reflux", "upper abdominal burning", "difficulty swallowing", "vomiting blood", "bloody stool", "jaundice",
                "skin itching", "swollen glands", "abdominal mass", "neck mass", "armpit mass", "groin mass", "skin discoloration", "night sweats"
            ],
            response: "This condition may require surgical intervention. Please consult a general surgeon."
        },
        {
            name: "gera7a",
            lang: "franco",
            keywords: [
                "fata2", "zayeda", "marara", "este2sal", "waram", "kharage", "eltehab zayeda", "7aswa marara", "gar7", "3amaleyat",
                "wage3 genb", "wage3 yameen elbatn", "wage3 yesar elbatn", "wage3 sorra", "ghashyan", "ga2y", "emsak", "ishal", "entefakh", "gazat",
                "nzeef shergy", "bawaseer", "shark shergy", "nasoor", "selees braz", "selees gazat", "taghayor 3adat elteberoz", "dam fel braz", "braz eswed",
                "braz refee3", "wage3 ba3d elakl", "shab3 saree3", "erteja3", "7ar2et a3la elbatn", "so3oba bel3", "ga2y dam", "braz damawy", "asfar",
                "7aka gilda", "waram gland", "ketla fel batn", "ketla fel enek", "ketla fel ebt", "ketla fel magban", "taghayer lon elgilda", "3ara2 leily"
            ],
            response: "El 7ala deh momken te7tag gera7a. Roh doctor gera7a."
        },

        // مسالك بولية - Urology
        {
            name: "مسالك بولية",
            lang: "ar",
            keywords: [
                "حرقة بول", "تبول متكرر", "ألم جانب", "حصوة كلية", "دم في البول", "سلس بول", "تضخم بروستاتا", "التهاب مجاري", "احتباس بول", "غسيل كلية",
                "ألم ظهر", "ألم الخاصرة", "ألم أسفل البطن", "ألم خصية", "ألم قضيب", "تورم خصية", "إفرازات قضيب", "حكة تناسلية", "رائحة كريهة",
                "تقطع بول", "ضعف تيار بول", "صعوبة بدء تبول", "تبول ليلي", "زيادة عدد مرات التبول", "حصر بول", "بول عكر", "بول كريه الرائحة", "رغوة بول",
                "ألم بعد التبول", "حرارة", "قشعريرة", "غثيان", "قيء", "ضعف جنسي", "قذف مبكر", "عنانة", "انتصاب مؤلم", "انتصاب طويل",
                "خصوبة", "تحليل مني", "ضعف عدد حيوانات منوية", "دوالي خصية", "التهاب بروستاتا", "فحص بروستاتا", "تضخم حميد بروستاتا", "سرطان بروستاتا"
            ],
            response: "الأعراض تشير إلى مشكلة في المسالك البولية. يُنصح بزيارة طبيب مسالك بولية."
        },
        {
            name: "Urology",
            lang: "en",
            keywords: [
                "burning urine", "frequent urination", "flank pain", "kidney stone", "blood in urine", "incontinence", "prostate enlargement", "UTI", "urinary retention", "dialysis",
                "back pain", "flank pain", "lower abdominal pain", "testicular pain", "penile pain", "swollen testicle", "penile discharge", "genital itching", "bad odor",
                "interrupted urination", "weak urine stream", "difficulty starting urination", "nighttime urination", "increased urination frequency", "urinary blockage", "cloudy urine", "foul-smelling urine", "foamy urine",
                "pain after urination", "fever", "chills", "nausea", "vomiting", "erectile dysfunction", "premature ejaculation", "impotence", "painful erection", "prolonged erection",
                "fertility", "semen analysis", "low sperm count", "varicocele", "prostatitis", "prostate exam", "benign prostate hyperplasia", "prostate cancer"
            ],
            response: "These symptoms suggest urological issues. Please consult a urologist."
        },
        {
            name: "masalek",
            lang: "franco",
            keywords: [
                "7ar2et bol", "bol kteer", "wage3 genb", "7aswa kelya", "dam fel bol", "selees bol", "brostate", "eltehab magary", "e7tebas bol", "ghaseel kelya",
                "wage3 dahar", "wage3 el5asra", "wage3 asfal elbatn", "wage3 khesya", "wage3 2adeeb", "waram khesya", "efrazat 2adeeb", "7aka tanasoleya", "rey7a kareha",
                "ta2ta3 bol", "da3f tayar bol", "so3oba bed2 bol", "bol leily", "zedet 3adad marat elbol", "7asar bol", "bol 3aker", "bol rey7eto kareha", "roghwa bol",
                "wage3 ba3d elbol", "7arara", "2ash3era", "ghashyan", "ga2y", "da3f gensey", "ka2f mobaker", "3anana", "entesab mo2lem", "entesab taweel",
                "khesoba", "t7aleel many", "da3f 3adad 7yawanat manya", "dawaly khesya", "eltehab brostate", "fahs brostate", "takhom 7ameed brostate", "sartan brostate"
            ],
            response: "El moshkela deh fe el masalek el boleya. Roh doctor masalek."
        },

        // أعصاب - Neurology
        {
            name: "أعصاب",
            lang: "ar",
            keywords: [
                "صداع", "شلل", "تنميل", "رعشة", "صرع", "زغللة عين", "فقدان توازن", "ضعف عضلات", "التهاب أعصاب", "جلطة دماغية",
                "دوخة", "غثيان", "قيء", "طنين أذن", "ضعف نظر", "ازدواج رؤية", "سقوط جفن", "تشنجات", "فقدان وعي", "نوبات",
                "ضعف ذاكرة", "نسيان", "تشتت", "ضعف تركيز", "تأخر كلام", "صعوبة نطق", "تلعثم", "رعشة يد", "رعشة رأس", "رعشة صوت",
                "ألم عصبي", "ألم وجه", "ألم مثل صعقة كهربائية", "حساسية لمس", "ضعف إحساس", "حرقان جلد", "وخز", "تنميل أطراف", "ضعف ساق",
                "سقوط قدم", "صعوبة مشي", "ترنح", "التواء قدم", "تشوه قدم", "تعرق زائد", "جفاف جلد", "تغير لون جلد", "تغير حجم حدقة"
            ],
            response: "الأعراض تشير إلى مشكلة عصبية. يُنصح بزيارة طبيب أعصاب."
        },
        {
            name: "Neurology",
            lang: "en",
            keywords: [
                "headache", "paralysis", "numbness", "tremor", "epilepsy", "vision loss", "loss of balance", "muscle weakness", "neuritis", "stroke",
                "dizziness", "nausea", "vomiting", "ear ringing", "vision impairment", "double vision", "drooping eyelid", "convulsions", "loss of consciousness", "seizures",
                "memory loss", "forgetfulness", "distraction", "poor concentration", "speech delay", "speech difficulty", "stuttering", "hand tremor", "head tremor", "voice tremor",
                "nerve pain", "facial pain", "electric shock-like pain", "touch sensitivity", "sensory loss", "skin burning", "tingling", "limb numbness", "leg weakness",
                "foot drop", "walking difficulty", "ataxia", "foot twisting", "foot deformity", "excessive sweating", "dry skin", "skin discoloration", "pupil size changes"
            ],
            response: "These neurological symptoms require evaluation by a neurologist."
        },
        {
            name: "a3sab",
            lang: "franco",
            keywords: [
                "sodaa3", "shalal", "tanmeel", "ra3sha", "sar3", "zaghala", "fa2dan tawazoen", "da3f 3adalat", "eltehab a3sab", "galta demagheya",
                "dawkha", "ghashyan", "ga2y", "taneen wedn", "da3f nazar", "ezdawag ro2ya", "so2ot gofon", "tashanogat", "fa2dan we3y", "nobat",
                "da3f zakra", "nesyan", "tashtot", "da3f tarkeez", "ta2akhor kalam", "so3oba nate2", "tala3som", "ra3sha eed", "ra3sha ras", "ra3sha sout",
                "wage3 3asaby", "wage3 weesh", "wage3 zay sa2a kahraba", "7asaseya lems", "da3f e7sas", "7ar2et gilda", "wakhz", "tanmeel atraf", "da3f sa2",
                "so2ot adam", "so3oba mashy", "taranoh", "eltewa adam", "tashweeh adam", "3ara2 zayed", "goffaf gilda", "taghayor lon elgilda", "taghayor 7agm 7ade2a"
            ],
            response: "El a3rad deh beteshir le moshkela 3asabeya. Roh doctor a3sab."
        },

        // أورام - Oncology
        {
            name: "أورام",
            lang: "ar",
            keywords: [
                "ورم", "كتلة", "سرطان", "علاج كيماوي", "ألم مستمر", "نقص وزن غير مبرر", "تغير لون الجلد", "تغير في الشامات", "انتفاخ غدد", "إعياء شديد",
                "فقدان شهية", "شبع سريع", "غثيان", "قيء", "تعرق ليلي", "حرارة", "سعال مزمن", "بصاق دموي", "بحة صوت", "صعوبة بلع",
                "نزيف", "كدمات", "شحوب", "اصفرار", "تورم وجه", "تورم رقبة", "تورم إبط", "تورم مغبن", "ألم عظام", "كسر غير مسبب",
                "تغير عادات التبرز", "دم في البراز", "براز أسود", "براز رفيع", "تغير عادات التبول", "دم في البول", "ألم عند التبول", "تأخر التئام جروح",
                "تغير شكل ثدي", "إفرازات ثدي", "كتلة ثدي", "تغير لون جلد ثدي", "تغير شكل حلمة", "تورم خصية", "كتلة خصية", "ألم خصية"
            ],
            response: "هذه الأعراض قد تشير إلى مشكلة تتطلب استشارة أخصائي أورام."
        },
        {
            name: "Oncology",
            lang: "en",
            keywords: [
                "tumor", "lump", "cancer", "chemotherapy", "persistent pain", "unexplained weight loss", "skin changes", "mole changes", "swollen glands", "severe fatigue",
                "loss of appetite", "early satiety", "nausea", "vomiting", "night sweats", "fever", "chronic cough", "bloody sputum", "hoarseness", "difficulty swallowing",
                "bleeding", "bruising", "pallor", "jaundice", "facial swelling", "neck swelling", "armpit swelling", "groin swelling", "bone pain", "unexplained fracture",
                "bowel habit changes", "blood in stool", "black stool", "thin stool", "urinary habit changes", "blood in urine", "painful urination", "delayed wound healing",
                "breast shape changes", "breast discharge", "breast lump", "breast skin changes", "nipple changes", "testicular swelling", "testicular lump", "testicular pain"
            ],
            response: "These symptoms may indicate an oncological issue. Please consult an oncologist."
        },
        {
            name: "awram",
            lang: "franco",
            keywords: [
                "waram", "ketla", "sartan", "chemotherapy", "wage3 mostamer", "no2s weight gheyr motabar", "taghayor lon elgilda", "taghayor fel shamat", "entefakh gland", "e3ya2 shadeed",
                "fa2dan shehya", "shab3 saree3", "ghashyan", "ga2y", "3ara2 leily", "7arara", "shel menem", "besha2 damawy", "ba7et sout", "so3oba bel3",
                "nzeef", "kadamat", "she7ab", "asfar", "waram weesh", "waram ra2aba", "waram ebt", "waram magban", "wage3 3zam", "kasr gheyr motabar",
                "taghayor 3adat elteberoz", "dam fel braz", "braz eswed", "braz refee3", "taghayor 3adat elbol", "dam fel bol", "wage3 7en elbol", "ta2akhor eltiam garo7",
                "taghayor shakl el seda", "efrazat seda", "ketla seda", "taghayor lon gilda el seda", "taghayor shakl el7alama", "waram khesya", "ketla khesya", "wage3 khesya"
            ],
            response: "Momken yeb2a fe moshkela awram. Roh doctor awram."
        },

        // غدد صماء - Endocrinology
        {
            name: "غدد صماء",
            lang: "ar",
            keywords: [
                "سكري", "غدة درقية", "هرمونات", "سمنة", "نحافة", "تعب مزمن", "عطش", "جوع مستمر", "تساقط شعر", "اضطراب هرموني",
                "زيادة وزن", "نقص وزن", "تورم رقبة", "خفقان", "تعرق", "رعشة يد", "عصبية", "قلق", "أرق", "ضعف تركيز",
                "جفاف جلد", "حكة", "تصبغ جلد", "شحوب", "احمرار وجه", "زيادة شعر", "صلع", "حب شباب", "تغير صوت", "كبر يدين",
                "كبر قدمين", "تغير شكل وجه", "بروز جبهة", "كبر شفاه", "كبر أنف", "كبر لسان", "تأخر نمو", "تأخر بلوغ",
                "عدم انتظام دورة", "غزارة دورة", "انقطاع دورة", "عقم", "ضعف خصوبة", "تكيس مبايض", "تضخم ثدي", "إفرازات حليب"
            ],
            response: "الأعراض تشير إلى مشكلة في الغدد الصماء. يُنصح بزيارة طبيب غدد صماء."
        },
        {
            name: "Endocrinology",
            lang: "en",
            keywords: [
                "diabetes", "thyroid", "hormones", "obesity", "underweight", "chronic fatigue", "thirst", "constant hunger", "hair loss", "hormonal imbalance",
                "weight gain", "weight loss", "neck swelling", "palpitations", "sweating", "hand tremors", "nervousness", "anxiety", "insomnia", "poor concentration",
                "dry skin", "itching", "skin pigmentation", "pallor", "facial redness", "excess hair", "baldness", "acne", "voice changes", "large hands",
                "large feet", "facial changes", "protruding forehead", "large lips", "large nose", "large tongue", "growth delay", "delayed puberty",
                "irregular periods", "heavy periods", "missed periods", "infertility", "low fertility", "PCOS", "breast enlargement", "milk discharge"
            ],
            response: "These symptoms suggest endocrine disorders. Please consult an endocrinologist."
        },
        {
            name: "gland",
            lang: "franco",
            keywords: [
                "sokary", "dara2eya", "hormonat", "samana", "na7afa", "ta3ab menem", "3atash", "go3 mostamer", "tasakot sha3r", "eztarab hormon",
                "zedet weight", "no2s weight", "waram ra2aba", "kafkan", "3ara2", "ra3sha eed", "3asabeya", "kalak", "ark", "da3f tarkeez",
                "goffaf gilda", "7aka", "tasbegh gilda", "she7ab", "e7merar weesh", "zedet sha3r", "sala3", "7ab shabab", "taghayor sout", "kebr eedeen",
                "kebr adameen", "taghayor shakl elweesh", "boroz gabha", "kebr shefaef", "kebr enf", "kebr lesan", "ta2akhor namo", "ta2akhor bologh",
                "3adam entezam dawra", "ghazara dawra", "enqeta3 dawra", "3akm", "da3f khesoba", "takyeess", "takhom seda", "efrazat laban"
            ],
            response: "El a3rad deh fe el gland el sma3. Roh doctor gland."
        },
        // جهاز هضمي - Gastroenterology
            {
                name: "جهاز هضمي",
                lang: "ar",
                keywords: [
                    "ألم بطن", "إسهال", "إمساك", "قيء", "حرقة معدة", "انتفاخ", "غازات", "دم في البراز", "بواسير", "ارتجاع",
                    "غثيان", "فقدان شهية", "شبع سريع", "نقص وزن", "زيادة وزن", "براز أسود", "براز دموي", "براز رفيع", "براز دهني", "براز كريه الرائحة",
                    "صعوبة بلع", "ألم بلع", "شعور بالحصرة", "تقيؤ دم", "تقيؤ قهوة", "اصفرار", "حكة", "بول داكن", "براز فاتح", "دوخة",
                    "ضعف", "شحوب", "تعب مزمن", "نزيف شرجي", "شرخ شرجي", "سلس براز", "سلس غازات", "تغير عادات التبرز", "ألم شرج", "حكة شرج",
                    "ارتجاع حمضي", "طعم مر", "كحة مزمنة", "بحة صوت", "ألم صدر", "ضيق تنفس", "فواق مستمر", "رائحة فم كريهة", "قرحة"
                ],
                response: "الأعراض تشير إلى مشكلة في الجهاز الهضمي. يُنصح بزيارة طبيب جهاز هضمي."
            },
            {
                name: "Gastroenterology",
                lang: "en",
                keywords: [
                    "abdominal pain", "diarrhea", "constipation", "vomiting", "heartburn", "bloating", "gas", "blood in stool", "hemorrhoids", "reflux",
                    "nausea", "loss of appetite", "early satiety", "weight loss", "weight gain", "black stool", "bloody stool", "thin stool", "fatty stool", "foul-smelling stool",
                    "difficulty swallowing", "painful swallowing", "stuck sensation", "vomiting blood", "coffee ground vomit", "jaundice", "itching", "dark urine", "pale stool", "dizziness",
                    "weakness", "pallor", "chronic fatigue", "rectal bleeding", "anal fissure", "fecal incontinence", "gas incontinence", "bowel habit changes", "anal pain", "anal itching",
                    "acid reflux", "bitter taste", "chronic cough", "hoarseness", "chest pain", "shortness of breath", "persistent hiccups", "bad breath", "ulcer"
                ],
                response: "These symptoms suggest gastrointestinal issues. Please consult a gastroenterologist."
            },
            {
                name: "hazmy",
                lang: "franco",
                keywords: [
                    "wage3 batn", "ishal", "emsak", "ga2y", "7ar2et me3da", "entefakh", "gazat", "dam fel braz", "bawaseer", "erteja3",
                    "ghashyan", "fa2dan shehya", "shab3 saree3", "no2s weight", "zedet weight", "braz eswed", "braz damawy", "braz refee3", "braz dony", "braz rey7eto kareha",
                    "so3oba bel3", "wage3 bel3", "7es bel7asra", "ga2y dam", "ga2y ahwa", "asfar", "7aka", "bol dark", "braz fates7", "dawkha",
                    "da3f", "she7ab", "ta3ab menem", "nzeef shergy", "shark shergy", "selees braz", "selees gazat", "taghayor 3adat elteberoz", "wage3 shergy", "7aka shergy",
                    "erteja3 7amedy", "ta3em morr", "kaha menem", "ba7et sout", "wage3 sadr", "day2 tanaffos", "fwa2 mostamer", "rey7a fom kareha", "2orha"
                ],
                response: "El moshkela deh fe el nezam el hazmy. Roh doctor hazmy."
            },

            // روماتيزم - Rheumatology
            {
                name: "روماتيزم",
                lang: "ar",
                keywords: [
                    "ألم مفاصل", "تيبس", "ورم مفاصل", "ألم عضلات", "التهاب مفاصل", "ألم رقبة", "ألم كتف", "ألم رسغ", "ألم قدم", "ألم أسفل الظهر",
                    "تورم أصابع", "احمرار مفاصل", "حرارة مفاصل", "ألم عند الحركة", "ألم عند الراحة", "ألم ليلي", "تيبس صباحي", "ضعف قبضة", "صعوبة مسك الأشياء",
                    "تشوه مفاصل", "تقوس أصابع", "ألم كعب", "ألم كف اليد", "ألم باطن القدم", "ألم متنقل", "طفح جلدي", "حساسية ضوء", "تقرحات فم", "تقرحات تناسلية",
                    "جفاف عين", "جفاف فم", "تساقط شعر", "اصفرار جلد", "تغير لون أصابع", "تنميل أصابع", "برودة أصابع", "حرارة أصابع", "ضعف عضلات", "صعوبة نهوض",
                    "ألم عضلي عام", "تعب مزمن", "حرارة", "تعرق ليلي", "نقص وزن", "ضعف شهية", "اكتئاب", "قلق", "أرق", "ضعف تركيز"
                ],
                response: "الأعراض تشير إلى مشكلة روماتيزمية. يُنصح بزيارة طبيب روماتيزم."
            },
            {
                name: "Rheumatology",
                lang: "en",
                keywords: [
                    "joint pain", "stiffness", "swollen joints", "muscle pain", "arthritis", "neck pain", "shoulder pain", "wrist pain", "foot pain", "lower back pain",
                    "swollen fingers", "red joints", "warm joints", "pain with movement", "pain at rest", "night pain", "morning stiffness", "weak grip", "difficulty holding objects",
                    "joint deformity", "bent fingers", "heel pain", "hand pain", "foot sole pain", "migratory pain", "skin rash", "light sensitivity", "mouth ulcers", "genital ulcers",
                    "dry eyes", "dry mouth", "hair loss", "yellow skin", "finger color changes", "numb fingers", "cold fingers", "warm fingers", "muscle weakness", "difficulty rising",
                    "general muscle pain", "chronic fatigue", "fever", "night sweats", "weight loss", "poor appetite", "depression", "anxiety", "insomnia", "poor concentration"
                ],
                response: "These symptoms suggest rheumatic issues. Please consult a rheumatologist."
            },
            {
                name: "rheumatism",
                lang: "franco",
                keywords: [
                    "wage3 mafasel", "teyebs", "waram mafasel", "wage3 3adalat", "eltehab mafasel", "wage3 ra2aba", "wage3 ketf", "wage3 resg", "wage3 adam", "wage3 asfal el dahar",
                    "waram asabe3", "e7merar mafasel", "7arara mafasel", "wage3 7en el7araka", "wage3 7en elra7a", "wage3 leily", "teyebs sob7y", "da3f 2abda", "so3oba emsak elashya2",
                    "tashweeh mafasel", "ta2os asabe3", "wage3 ka3b", "wage3 kaff eed", "wage3 batn eladam", "wage3 motana2el", "tafah gildy", "7asaseya daw2", "ta2aree7 fam", "ta2aree7 tanasoleya",
                    "goffaf 3en", "goffaf fam", "tasakot sha3r", "asfar gilda", "taghayor lon asabe3", "tanmeel asabe3", "bord asabe3", "7arara asabe3", "da3f 3adalat", "so3oba nohood",
                    "wage3 3adaly 3am", "ta3ab menem", "7arara", "3ara2 leily", "no2s weight", "da3f shehya", "depreshen", "kalak", "ark", "da3f tarkeez"
                ],
                response: "El a3rad deh teb2a rheumatism. Roh doctor rheumatism."
            },

            // تخدير - Anesthesiology
            {
                name: "تخدير",
                lang: "ar",
                keywords: [
                    "عملية", "جراحة", "تخدير", "ألم بعد عملية", "غثيان بعد تخدير", "مخدر", "فقدان وعي", "تنميل", "شلل مؤقت", "جراحة",
                    "ألم مزمن", "ألم عصبي", "ألم مثل كهرباء", "ألم حارق", "ألم شديد", "ألم بعد جراحة", "ألم لا يتحسن", "ألم منتشر", "ألم موضعي", "حساسية دواء",
                    "قيء بعد جراحة", "دوخة بعد جراحة", "صداع بعد جراحة", "تنميل بعد جراحة", "ضعف بعد جراحة", "صعوبة تنفس", "حساسية تنفس", "ربو", "ضيق تنفس", "ألم صدر",
                    "توقف تنفس", "تباطؤ تنفس", "زرقة", "شحوب", "تعرق", "رعشة", "تشنجات", "حرارة", "برودة", "تسارع ضربات"
                ],
                response: "هذه الأعراض متعلقة بالتخدير. يُنصح باستشارة طبيب تخدير."
            },
            {
                name: "Anesthesiology",
                lang: "en",
                keywords: [
                    "surgery", "operation", "anesthesia", "post-op pain", "nausea after anesthesia", "anesthetic", "loss of consciousness", "numbness", "temporary paralysis", "surgical",
                    "chronic pain", "nerve pain", "electric shock pain", "burning pain", "severe pain", "post-surgical pain", "unimproved pain", "widespread pain", "localized pain", "drug allergy",
                    "post-op vomiting", "post-op dizziness", "post-op headache", "post-op numbness", "post-op weakness", "breathing difficulty", "breathing allergy", "asthma", "shortness of breath", "chest pain",
                    "breathing stop", "slow breathing", "cyanosis", "pallor", "sweating", "tremors", "convulsions", "fever", "coldness", "rapid heartbeat"
                ],
                response: "These anesthesia-related symptoms should be evaluated by an anesthesiologist."
            },
            {
                name: "takhdeer",
                lang: "franco",
                keywords: [
                    "3amleya", "gera7a", "takhdeer", "wage3 ba3d 3amleya", "ghashyan ba3d takhdeer", "mokhader", "fa2dan we3y", "tanmeel", "shalal mo2a2et", "amaleyat",
                    "wage3 menem", "wage3 3asaby", "wage3 zay kahraba", "wage7 7are2", "wage3 shadeed", "wage3 ba3d gera7a", "wage3 mesh beyet7asen", "wage3 montasher", "wage3 mawdoo3y", "7asaseya dawaa",
                    "ga2y ba3d gera7a", "dawkha ba3d gera7a", "sodaa3 ba3d gera7a", "tanmeel ba3d gera7a", "da3f ba3d gera7a", "so3oba tanaffos", "7asaseya tanaffos", "rabo", "day2 tanaffos", "wage3 sadr",
                    "wa2f tanaffos", "taba2o2 tanaffos", "zar2a", "she7ab", "3ara2", "ra3sha", "tashanogat", "7arara", "borda", "tesaro3 darabat"
                ],
                response: "El a3rad deh mota3le2a bel takhdeer. Roh doctor takhdeer."
            },

            // طب طوارئ - Emergency Medicine
            {
                name: "طب طوارئ",
                lang: "ar",
                keywords: [
                    "إسعاف", "حادث", "إصابة", "نزيف", "كسر", "حرق", "تسمم", "غرق", "صعقة كهربائية", "ألم صدر مفاجئ",
                    "ضيق تنفس", "اختناق", "تورم وجه", "تورم شفاه", "طفح جلدي", "حساسية", "صدمة", "فقدان وعي", "تشنجات", "سكتة",
                    "شلل", "ضعف مفاجئ", "تغير نظر", "ازدواج رؤية", "فقدان بصر", "صداع شديد", "تقيؤ متكرر", "تقيؤ دم", "براز دموي", "بول دموي",
                    "ألم بطني شديد", "ألم ظهر شديد", "ألم صدر شديد", "ألم رأس شديد", "ارتفاع حرارة", "تعرق", "شحوب", "زرقة", "برودة", "رعشة",
                    "تسمم غذائي", "تسمم دوائي", "جرعة زائدة", "انتحار", "إيذاء نفس", "نزيف أنف", "نزيف أذن", "نزيف عين", "نزيف مهبلي", "نزيف شرجي"
                ],
                response: "هذه حالة طارئة تتطلب الذهاب إلى قسم الطوارئ فورًا."
            },
            {
                name: "Emergency Medicine",
                lang: "en",
                keywords: [
                    "emergency", "accident", "injury", "bleeding", "fracture", "burn", "poisoning", "drowning", "electric shock", "sudden chest pain",
                    "shortness of breath", "suffocation", "facial swelling", "lip swelling", "skin rash", "allergy", "shock", "loss of consciousness", "convulsions", "stroke",
                    "paralysis", "sudden weakness", "vision changes", "double vision", "vision loss", "severe headache", "repeated vomiting", "vomiting blood", "bloody stool", "bloody urine",
                    "severe abdominal pain", "severe back pain", "severe chest pain", "severe head pain", "high fever", "sweating", "pallor", "cyanosis", "coldness", "tremors",
                    "food poisoning", "drug poisoning", "overdose", "suicide", "self harm", "nosebleed", "ear bleeding", "eye bleeding", "vaginal bleeding", "rectal bleeding"
                ],
                response: "This is an emergency condition that requires immediate ER visit."
            },
            {
                name: "twar2",
                lang: "franco",
                keywords: [
                    "es3af", "7ades", "esaba", "nzeef", "kasr", "7ar2", "tasammom", "gara2", "sa2a kahraba", "wage3 sadr foga2ey",
                    "day2 tanaffos", "ekhtena2", "waram weesh", "waram shefaef", "tafah gildy", "7asaseya", "sadma", "fa2dan we3y", "tashanogat", "seket",
                    "shalal", "da3f foga2ey", "taghayor nazar", "ezdawag ro2ya", "fa2dan basar", "sodaa3 shadeed", "ga2y motakarer", "ga2y dam", "braz damawy", "bol damawy",
                    "wage3 batn shadeed", "wage3 dahar shadeed", "wage3 sadr shadeed", "wage3 ras shadeed", "ertefa2 7arara", "3ara2", "she7ab", "zar2a", "borda", "ra3sha",
                    "tasammom ghaza2y", "tasammom dawa2y", "gor3a zayeda", "ente7ar", "ezaa nafs", "nzeef enf", "nzeef wedn", "nzeef 3en", "nzeef mehbali", "nzeef shergy"
                ],
                response: "De 7ala etware2eya. Ro7 el es3af aw el twar2 3agalan."
            },

            // طب أسرة - Family Medicine
            {
                name: "طب أسرة",
                lang: "ar",
                keywords: [
                    "فحص دوري", "كشف عام", "تحاليل", "تطعيمات", "متابعة", "استشارة أولية", "فحص شامل", "رعاية أولية", "تاريخ مرضي", "نصائح وقائية",
                    "ضغط دم", "سكري", "كوليسترول", "سمنة", "نحافة", "تدخين", "كحول", "رياضة", "غذاء", "نوم",
                    "تعب", "إرهاق", "ضعف", "دوخة", "غثيان", "قيء", "صداع", "ألم عام", "حرارة", "سعال",
                    "رشح", "زكام", "تهاب حلق", "أذن", "أنف", "حنجرة", "عيون", "جلد", "شعر", "أظافر",
                    "اكتئاب", "قلق", "توتر", "أرق", "ضعف تركيز", "نسيان", "تشتت", "عصبية", "تقلب مزاج", "حزن"
                ],
                response: "للاستشارات العامة والفحوصات الدورية، يُنصح بزيارة طبيب الأسرة."
            },
            {
                name: "Family Medicine",
                lang: "en",
                keywords: [
                    "check-up", "general exam", "lab tests", "vaccination", "follow-up", "primary consultation", "comprehensive exam", "primary care", "medical history", "preventive advice",
                    "blood pressure", "diabetes", "cholesterol", "obesity", "underweight", "smoking", "alcohol", "exercise", "nutrition", "sleep",
                    "fatigue", "tiredness", "weakness", "dizziness", "nausea", "vomiting", "headache", "general pain", "fever", "cough",
                    "runny nose", "cold", "sore throat", "ear", "nose", "throat", "eyes", "skin", "hair", "nails",
                    "depression", "anxiety", "stress", "insomnia", "poor concentration", "forgetfulness", "distraction", "nervousness", "mood swings", "sadness"
                ],
                response: "For general consultations and routine check-ups, please visit a family medicine doctor."
            },
            {
                name: "osra",
                lang: "franco",
                keywords: [
                    "fahs dawry", "kashf 3am", "t7aleel", "ta3teemat", "metabe3a", "esteshara awaleya", "fahs shamel", "re3aya awaleya", "tareekh maredy", "nasa2e7 weka2eya",
                    "da8t dam", "sokary", "kolesterol", "samana", "na7afa", "tedkheen", "kohol", "reya7a", "ghaza2", "nowm",
                    "ta3ab", "erha2", "da3f", "dawkha", "ghashyan", "ga2y", "sodaa3", "wage3 3am", "7arara", "shel",
                    "rash7", "zokam", "eltehab 7elg", "wedn", "enf", "7angara", "3yoon", "gilda", "sha3r", "azafer",
                    "depreshen", "kalak", "tawtor", "ark", "da3f tarkeez", "nesyan", "tashtot", "3asabeya", "taghayor mood", "7azen"
                ],
                response: "Lel esteshara el awaleya wel fohos el dawreya, ro7 doctor el osra."
            },

            // علاج طبيعي - Physiotherapy
            {
                name: "علاج طبيعي",
                lang: "ar",
                keywords: [
                    "إعادة تأهيل", "ألم عضلات", "تمارين", "شد عضلي", "تقلصات", "ضعف عضلات", "إصابة رياضية", "مشية", "توازن", "مرونة",
                    "ألم مفاصل", "تيبس", "ورم", "ألم ظهر", "ألم رقبة", "ألم كتف", "ألم رسغ", "ألم يد", "ألم ركبة", "ألم قدم",
                    "ضعف حركة", "صعوبة حركة", "تأهيل بعد جراحة", "تأهيل بعد كسر", "تأهيل بعد سكتة", "شلل", "ضعف أعصاب", "تنميل", "وخز", "حرقان",
                    "سقوط", "عدم اتزان", "دوار", "دوخة", "ضعف مشي", "صعوبة صعود", "صعوبة نزول", "ألم عند الحركة", "ألم عند الراحة", "ألم ليلي",
                    "تأهيل أطفال", "تأخر مشي", "تأخر حركة", "تقوس ظهر", "تقوس قدم", "اعوجاج عمود فقري", "ضعف قبضة", "صعوبة مسك", "ألم مثلث", "ألم عصب"
                ],
                response: "هذه الحالة قد تستفيد من العلاج الطبيعي. يُنصح باستشارة أخصائي علاج طبيعي."
            },
            {
                name: "Physiotherapy",
                lang: "en",
                keywords: [
                    "rehabilitation", "muscle pain", "exercises", "muscle strain", "cramps", "muscle weakness", "sports injury", "gait", "balance", "flexibility",
                    "joint pain", "stiffness", "swelling", "back pain", "neck pain", "shoulder pain", "wrist pain", "hand pain", "knee pain", "foot pain",
                    "movement weakness", "movement difficulty", "post-surgery rehab", "post-fracture rehab", "post-stroke rehab", "paralysis", "nerve weakness", "numbness", "tingling", "burning",
                    "falling", "imbalance", "vertigo", "dizziness", "walking weakness", "climbing difficulty", "descending difficulty", "pain with movement", "pain at rest", "night pain",
                    "pediatric rehab", "walking delay", "movement delay", "back curvature", "foot curvature", "spinal deformity", "weak grip", "difficulty holding", "triangular pain", "nerve pain"
                ],
                response: "This condition may benefit from physiotherapy. Please consult a physiotherapist."
            },
            {
                name: "tabe3y",
                lang: "franco",
                keywords: [
                    "ta2heel", "wage3 3adalat", "tamaren", "shadd 3adaly", "ta2alosat", "da3f 3adalat", "esaba reyadeya", "meshya", "tawazoen", "morona",
                    "wage3 mafasel", "teyebs", "waram", "wage3 dahar", "wage3 ra2aba", "wage3 ketf", "wage3 resg", "wage3 eed", "wage3 rukba", "wage3 adam",
                    "da3f 7araka", "so3oba 7araka", "ta2heel ba3d gera7a", "ta2heel ba3d kasr", "ta2heel ba3d seket", "shalal", "da3f a3sab", "tanmeel", "wakhz", "7ar2",
                    "so2ot", "3adam etzan", "dawar", "dawkha", "da3f mashy", "so3oba so3ood", "so3oba nozool", "wage3 7en el7araka", "wage3 7en elra7a", "wage3 leily",
                    "ta2heel atfal", "ta2akhor mashy", "ta2akhor 7araka", "ta2os dahar", "ta2os adam", "e3wegam 3amood fikry", "da3f 2abda", "so3oba emsak", "wage3 mosallas", "wage3 3asaby"
                ],
                response: "El 7ala deh momken testafeed mel 3elag el tabe3y. Roh doctor 3elag tabe3y."
            },

            // تغذية - Nutrition
            {
                name: "تغذية",
                lang: "ar",
                keywords: [
                    "رجيم", "سمنة", "نحافة", "فقدان وزن", "زيادة وزن", "نظام غذائي", "سكري", "كوليسترول", "فيتامينات", "نقص معادن",
                    "حمية", "دايت", "سعرات", "كاربوهيدرات", "بروتين", "دهون", "ألياف", "مكملات", "فقدان شهية", "شراهة",
                    "نهم", "تقيؤ", "إسهال", "إمساك", "انتفاخ", "غازات", "حساسية طعام", "عدم تحمل طعام", "نباتي", "نباتي صرف",
                    "حمل", "رضاعة", "أطفال", "مراهقين", "كبار سن", "رياضيين", "بناء عضل", "تنشيف", "تضخيم", "مكملات رياضية",
                    "فيتامين د", "حديد", "كالسيوم", "بوتاسيوم", "مغنيسيوم", "زنك", "أوميغا", "بروبيوتيك", "ألياف", "مضادات أكسدة"
                ],
                response: "للاستشارات الغذائية وأنظمة التخسيس أو زيادة الوزن، يُنصح بزيارة أخصائي تغذية."
            },
            {
                name: "Nutrition",
                lang: "en",
                keywords: [
                    "diet", "obesity", "underweight", "weight loss", "weight gain", "diet plan", "diabetes", "cholesterol", "vitamins", "mineral deficiency",
                    "dieting", "diet", "calories", "carbohydrates", "protein", "fats", "fiber", "supplements", "loss of appetite", "binge eating",
                    "overeating", "vomiting", "diarrhea", "constipation", "bloating", "gas", "food allergy", "food intolerance", "vegetarian", "vegan",
                    "pregnancy", "breastfeeding", "children", "teenagers", "elderly", "athletes", "muscle building", "drying", "bulking", "sports supplements",
                    "vitamin D", "iron", "calcium", "potassium", "magnesium", "zinc", "omega", "probiotics", "fiber", "antioxidants"
                ],
                response: "For dietary consultations and weight management, please visit a nutritionist."
            },
            {
                name: "taghdeya",
                lang: "franco",
                keywords: [
                    "regeem", "samana", "na7afa", "fa2dan weight", "zedet weight", "nezam ghazai2y", "sokary", "kolesterol", "fatamenat", "no2s ma3aden",
                    "7ameya", "diet", "so3orat", "carbohydrates", "protein", "donon", "alyaaf", "makmelat", "fa2dan shehya", "sharaa",
                    "nahm", "ga2y", "ishal", "emsak", "entefakh", "gazat", "7asaseya ta3am", "3adam tahamol ta3am", "nabaty", "nabaty serf",
                    "7aml", "rada3a", "atfal", "morahegeen", "kobar sen", "reya7eyeen", "bena2 3adal", "tansheef", "tadkheem", "makmelat reya7eya",
                    "fatamen D", "7adeed", "kalseeom", "botasyom", "magneseom", "zink", "omega", "probiotics", "alyaaf", "moadat okseda"
                ],
                response: "Lel esteshara el ghaza2eya, ro7 doctor taghdeya."
            },

            // طب نفسي أطفال - Child Psychiatry
            {
                name: "طب نفسي أطفال",
                lang: "ar",
                keywords: [
                    "توحد", "فرط حركة", "تشتت انتباه", "خوف", "تبول لا إرادي", "عدوانية", "انطواء", "صعوبات تعلم", "تأخر كلام", "نوبات غضب",
                    "بكاء", "صراخ", "عصبية", "عناد", "تمرد", "كذب", "سرقة", "إيذاء نفس", "إيذاء آخرين", "تخريب",
                    "نوم", "أرق", "كوابيس", "فزع ليلي", "تبول ليلي", "تأخر نمو", "تأخر عقلي", "تأخر حركي", "تأخر لغوي", "تأخر اجتماعي",
                    "قلق", "توتر", "اكتئاب", "حزن", "يأس", "انعزال", "عدم اختلاط", "خجل", "خوف مدرسي", "رفض مدرسي",
                    "مشاكل دراسية", "ضعف تركيز", "نسيان", "تشتت", "حركة زائدة", "اندفاعية", "صعوبة قراءة", "صعوبة كتابة", "صعوبة حساب", "صعوبة نطق"
                ],
                response: "هذه الأعراض تتعلق بالصحة النفسية للأطفال. يُنصح باستشارة طبيب نفسي أطفال."
            },
            {
                name: "Child Psychiatry",
                lang: "en",
                keywords: [
                    "autism", "ADHD", "attention deficit", "fear", "bedwetting", "aggression", "withdrawal", "learning difficulties", "speech delay", "tantrums",
                    "crying", "screaming", "nervousness", "stubbornness", "rebellion", "lying", "stealing", "self harm", "harming others", "destruction",
                    "sleep", "insomnia", "nightmares", "night terrors", "bedwetting", "developmental delay", "mental delay", "motor delay", "language delay", "social delay",
                    "anxiety", "stress", "depression", "sadness", "hopelessness", "isolation", "lack of mixing", "shyness", "school phobia", "school refusal",
                    "academic problems", "poor concentration", "forgetfulness", "distraction", "hyperactivity", "impulsivity", "reading difficulty", "writing difficulty", "math difficulty", "speech difficulty"
                ],
                response: "These symptoms relate to children's mental health. Please consult a child psychiatrist."
            },
            {
                name: "nafsy atfal",
                lang: "franco",
                keywords: [
                    "taw7ed", "fart 7araka", "tashtot entebaah", "kawf", "bol la erady", "3edwania", "entewa2", "so3obat ta3alom", "ta2akhor kalam", "nobat ghadab",
                    "baky", "sarakh", "3asabeya", "3enad", "tamrod", "kizb", "ser2a", "ezaa nafs", "ezaa akhareen", "takreeb",
                    "nowm", "ark", "kawabees", "faza3 leily", "bol leily", "ta2akhor namo", "ta2akhor 3a2ly", "ta2akhor 7araky", "ta2akhor loghawy", "ta2akhor egtema3y",
                    "kalak", "tawtor", "depreshen", "7azen", "ya2s", "en3ezal", "3adam ekhtelat", "khegel", "kawf madrasy", "rafd madrasy",
                    "moshakel darseya", "da3f tarkeez", "nesyan", "tashtot", "7araka zayeda", "endefae3ya", "so3oba qera2a", "so3oba ketaba", "so3oba 7esab", "so3oba nate2"
                ],
                response: "El a3rad deh mota3le2a bel se7a el nafseya lel atfal. Roh doctor nafsy atfal."
            }
        ];



        /*********************************
         *         HELPER FUNCS         *
         *********************************/
        const normalize = (text) => text.toLowerCase().replace(/[.,!?،؛]/g, '').replace(/\s+/g, ' ').trim();

        function detectLanguage(text) {
            const arabic = /[\u0600-\u06FF]/;
            const latin = /^[a-zA-Z0-9\s.,!?']+$/;
            if (arabic.test(text)) return "ar";
            if (latin.test(text) && /[3|7|2|5|8|9]/.test(text)) return "franco";
            return "en";
        }

        function getMedicalAdvice(text) {
            const normText = normalize(text);
            const lang = detectLanguage(text);

            for (let s of specialties) {
                if (s.lang === lang) {
                    for (let kw of s.keywords) {
                        if (normText.includes(normalize(kw))) {
                            if (lang === "ar") {
                                return `تم تحديد التخصص المناسب: <b>${s.name}</b> <br>${s.response}`;
                            } else if (lang === "franco") {
                                return `El takhasos el monaseb howa: <b>${s.name}</b> <br>${s.response}`;
                            } else {
                                return `Specialty identified: <b>${s.name}</b> <br>${s.response}`;
                            }
                        }
                    }
                }
            }

            if (lang === "ar") {
                return "لم أتمكن من تحديد التخصص المناسب. يُرجى توضيح الأعراض بشكل أكبر.";
            } else if (lang === "franco") {
                return "Maqdarts a3raf el takhasos el monaseb. Yareet tewadeh el a3rad aktar.";
            } else {
                return "Couldn't identify the appropriate specialty. Please provide more detailed symptoms.";
            }
        }

        function updateSpecialtiesList() {
            const list = document.getElementById("specialties-list");
            list.innerHTML = "";
            specialties.filter(s => s.lang === "en").forEach(s => {
                const li = document.createElement("li");
                li.textContent = s.name;
                li.className = "specialty-item";
                list.appendChild(li);
            });
        }
        updateSpecialtiesList();

        /*********************************
         *      CHAT HISTORY FUNCTIONS   *
         *********************************/
        let currentChatSession = [];
        let chatSessions = JSON.parse(localStorage.getItem("chatSessions")) || [];

        function saveToHistory(userMessage, botResponse) {
            currentChatSession.push({
                user: userMessage,
                bot: botResponse,
                timestamp: new Date().toISOString()
            });

            if (chatSessions.length > 0) {
                chatSessions[0].messages = [...currentChatSession];
            } else {
                chatSessions.unshift({
                    id: Date.now(),
                    messages: [...currentChatSession]
                });
            }

            localStorage.setItem("chatSessions", JSON.stringify(chatSessions));
            renderHistory();
        }

        function renderHistory() {
            const historyList = document.getElementById("chat-history");
            if (!historyList) return;

            historyList.innerHTML = "";

            if (chatSessions.length === 0) {
                historyList.innerHTML = `<li style="color: #999; text-align: center;">No previous chats</li>`;
                return;
            }

            chatSessions.forEach((session, index) => {
                const li = document.createElement("li");
                li.className = "history-item";

                const firstMessage = session.messages[0]?.user || "Empty chat";
                li.textContent = firstMessage.length > 35 ?
                    firstMessage.slice(0, 35) + "..." : firstMessage;
                li.title = `Chat with ${session.messages.length} messages`;

                const deleteBtn = document.createElement("span");
                deleteBtn.className = "delete-history";
                deleteBtn.innerHTML = '<i class="fas fa-times"></i>';
                deleteBtn.addEventListener("click", (e) => {
                    e.stopPropagation();
                    deleteHistoryItem(index);
                });

                li.appendChild(deleteBtn);
                li.addEventListener("click", () => {
                    loadChatSession(index);
                });

                historyList.appendChild(li);
            });
        }

        function loadChatSession(index) {
            if (index < 0 || index >= chatSessions.length) return;

            const session = chatSessions[index];
            currentChatSession = [...session.messages];

            const chatOutput = document.getElementById("chat-output");
            if (!chatOutput) return;

            chatOutput.innerHTML = '';
            session.messages.forEach(msg => {
                appendMsg(msg.user, 'user-message');
                appendMsg(msg.bot, 'bot-message');
            });
        }

        function deleteHistoryItem(index) {
            if (index === 0 && currentChatSession.length > 0) {
                currentChatSession = [];
            }

            chatSessions.splice(index, 1);
            localStorage.setItem("chatSessions", JSON.stringify(chatSessions));
            renderHistory();
        }

                /*********************************
         *      AUTO-COMPLETE LOGIC      *
         *********************************/
        const chatInput = document.getElementById('chat-input');
        const autocompleteResults = document.createElement('div');
        autocompleteResults.className = 'autocomplete-results';
        chatInput.parentNode.insertBefore(autocompleteResults, chatInput.nextSibling);
        let currentFocus = -1;
        let allKeywords = [];

        // تحميل الكلمات المفتاحية مرة واحدة عند التحميل
        function loadKeywords() {
            allKeywords = [...new Set(specialties.flatMap(s => s.keywords))];
        }
        loadKeywords();

        // ربط الحدث مع تغيير الإدخال
        chatInput.addEventListener('input', showAutocompleteSuggestions);

        function showAutocompleteSuggestions() {
            const input = chatInput.value.trim().toLowerCase();
            autocompleteResults.innerHTML = '';
            currentFocus = -1;

            if (!input || input.length < 2) {
                autocompleteResults.style.display = 'none';
                return;
            }

            // تحسين البحث باستخدام filter مع cache
            const matches = allKeywords.filter(keyword =>
                keyword.toLowerCase().includes(input)
            ).slice(0, 5);

            if (matches.length === 0) {
                autocompleteResults.style.display = 'none';
                return;
            }

            autocompleteResults.innerHTML = matches.map(keyword =>
                `<div class="autocomplete-item" data-value="${keyword}">${highlightMatch(keyword, input)}</div>`
            ).join('');

            autocompleteResults.style.display = 'block';
            setActiveItem();
        }

        function highlightMatch(text, query) {
            if (!query) return text;
            const startIdx = text.toLowerCase().indexOf(query);
            if (startIdx < 0) return text;

            const endIdx = startIdx + query.length;
            return text.substring(0, startIdx) +
                   '<span class="autocomplete-highlight">' +
                   text.substring(startIdx, endIdx) +
                   '</span>' +
                   text.substring(endIdx);
        }

        function setActiveItem() {
            const items = autocompleteResults.querySelectorAll('.autocomplete-item');
            if (!items || items.length === 0) return;

            // إزالة التنشيط من جميع العناصر أولاً
            items.forEach(item => item.classList.remove('autocomplete-active'));

            // تنشيط العنصر الحالي إذا كان صالحاً
            if (currentFocus >= 0 && currentFocus < items.length) {
                items[currentFocus].classList.add('autocomplete-active');
                items[currentFocus].scrollIntoView({ block: 'nearest', behavior: 'smooth' });
            }
        }

        function selectActiveItem() {
            const items = autocompleteResults.querySelectorAll('.autocomplete-item');
            if (currentFocus >= 0 && currentFocus < items.length) {
                const selectedItem = items[currentFocus];
                chatInput.value = selectedItem.getAttribute('data-value') || selectedItem.textContent;
                autocompleteResults.style.display = 'none';
                currentFocus = -1;
                return true;
            }
            return false;
        }

        // تحسين أحداث الكيبورد
        chatInput.addEventListener('keydown', function(e) {
            const items = autocompleteResults.querySelectorAll('.autocomplete-item');
            if (!items || items.length === 0) return;

            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    currentFocus = (currentFocus + 1) % items.length;
                    setActiveItem();
                    break;

                case 'ArrowUp':
                    e.preventDefault();
                    currentFocus = (currentFocus - 1 + items.length) % items.length;
                    setActiveItem();
                    break;

                case 'Enter':
                    e.preventDefault();
                    if (!selectActiveItem() && chatInput.value.trim() !== '' && !isWaitingForResponse) {
                        sendMessage();
                    }
                    break;

                case 'Escape':
                    e.preventDefault();
                    autocompleteResults.style.display = 'none';
                    currentFocus = -1;
                    break;

                case 'Tab':
                    if (autocompleteResults.style.display === 'block') {
                        e.preventDefault();
                        selectActiveItem();
                    }
                    break;
            }
        });

        // تحسين أحداث الفأرة
        autocompleteResults.addEventListener('click', function(e) {
            const item = e.target.closest('.autocomplete-item');
            if (item) {
                chatInput.value = item.getAttribute('data-value') || item.textContent;
                autocompleteResults.style.display = 'none';
                currentFocus = -1;
                chatInput.focus();
            }
        });

        // تحسين حدث blur مع تأخير للسماح بالنقر على الاقتراحات
        chatInput.addEventListener('blur', function() {
            setTimeout(() => {
                if (!autocompleteResults.contains(document.activeElement)) {
                    autocompleteResults.style.display = 'none';
                    currentFocus = -1;
                }
            }, 200);
        });

        // إغلاق الاقتراحات عند النقر خارجها
        document.addEventListener('click', function(e) {
            if (!chatInput.contains(e.target) && !autocompleteResults.contains(e.target)) {
                autocompleteResults.style.display = 'none';
                currentFocus = -1;
            }
        });
        /*********************************
         *            CHAT UX           *
         *********************************/
        let isWaitingForResponse = false;

        function appendMsg(text, className) {
            const p = document.createElement('p');
            p.className = className;
            p.innerHTML = text;
            document.getElementById('chat-output').appendChild(p);
            document.getElementById('chat-output').scrollTop = document.getElementById('chat-output').scrollHeight;
        }

        function sendMessage() {
            const text = chatInput.value.trim();
            if (!text || isWaitingForResponse) return;

            autocompleteResults.style.display = 'none';
            appendMsg(text, 'user-message');
            chatInput.value = '';

            isWaitingForResponse = true;
            document.getElementById('send-btn').disabled = true;

            const loadingMsg = document.createElement('p');
            loadingMsg.className = 'bot-message';
            loadingMsg.innerHTML = '<i class="fa-solid fa-spinner fa-spin" style="color:var(--loading-color)"></i> Loading, please wait...';
            document.getElementById('chat-output').appendChild(loadingMsg);
            document.getElementById('chat-output').scrollTop = document.getElementById('chat-output').scrollHeight;

            setTimeout(() => {
                loadingMsg.remove();
                const response = getMedicalAdvice(text);
                appendMsg(response, 'bot-message');
                saveToHistory(text, response);

                isWaitingForResponse = false;
                document.getElementById('send-btn').disabled = false;
            }, 2000);
        }

        /*********************************
         *         EVENT LISTENERS       *
         *********************************/
        chatInput.addEventListener('input', showAutocompleteSuggestions);
        document.addEventListener('click', (e) => {
            if (e.target !== chatInput && !autocompleteResults.contains(e.target)) {
                autocompleteResults.style.display = 'none';
            }
        });

        chatInput.addEventListener('keydown', function(e) {
            const items = autocompleteResults.querySelectorAll('.autocomplete-item');

            if (e.key === 'ArrowDown') {
                e.preventDefault();
                currentFocus = Math.min(currentFocus + 1, items.length - 1);
                setActiveItem(items);
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                currentFocus = Math.max(currentFocus - 1, -1);
                setActiveItem(items);
            } else if (e.key === 'Enter') {
                e.preventDefault();
                if (currentFocus >= 0 && items.length > 0) {
                    chatInput.value = items[currentFocus].textContent;
                    autocompleteResults.style.display = 'none';
                } else if (chatInput.value.trim() !== '' && !isWaitingForResponse) {
                    sendMessage();
                }
            }
        });

        document.getElementById('send-btn').addEventListener('click', function() {
            if (!isWaitingForResponse) {
                sendMessage();
            }
        });

        document.getElementById('new-chat-btn').addEventListener('click', () => {
            document.getElementById('chat-output').innerHTML = '';
            currentChatSession = [];
        });

        // Initialize on page load
        document.addEventListener("DOMContentLoaded", function() {
            currentChatSession = [];
            chatSessions = JSON.parse(localStorage.getItem("chatSessions")) || [];
            renderHistory();
        });



    </script>


</body>
</html>
